System.register("chunks:///_virtual/background.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,r=n._decorator,o=n.Component}],execute:function(){var c;e._RF.push({},"6c3928bj+NETIOELUrYcpgc","background",void 0);var i=r.ccclass;r.property,n("background",i("background")(c=function(n){function e(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))||this).wBackground=288,t.isGameOver=!1,t[0]=void 0,t}t(e,n);var r=e.prototype;return r.start=function(){},r.update=function(n){this.isGameOver},r.stopMovement=function(){this.isGameOver=!0},r.continueMovement=function(){this.isGameOver=!1},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/background1.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.Vec3,c=n.Component}],execute:function(){var i;e._RF.push({},"0c0dcu01hZCnpBeu9mHUnaG","background1",void 0);var a=o.ccclass;o.property,n("background",a("background")(i=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).wBackground=288,t.isGameOver=!1,t[0]=void 0,t}t(e,n);var o=e.prototype;return o.start=function(){},o.update=function(n){this.isGameOver||(this.node.translate(new r(-100*n,0,0)),this.node.position.x<=-1*(this.wBackground/2+this.wBackground)&&this.node.translate(new r(this.wBackground,0,0)))},o.stopMovement=function(){this.isGameOver=!0},o.continueMovement=function(){this.isGameOver=!1},e}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/bird.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DifficultyManager.ts","./PowerUpManager.ts","./ComboManager.ts","./TimerManager.ts","./ScoreManager.ts","./GameStateManager.ts","./MovementController.ts","./CollisionManager.ts","./SaveSystemManager.ts","./Loot.ts"],(function(e){var t,o,i,a,r,n,s,l,c,h,u,p,m,d,g,f,C,S,w,b,v,M,y,L,T,k,G,R,P,O,U,A,E,x,z,N,B,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,s=e.Label,l=e.Node,c=e.Animation,h=e.Graphics,u=e.AudioSource,p=e.AudioClip,m=e.Vec3,d=e.Color,g=e.director,f=e.Sprite,C=e.find,S=e.input,w=e.Input,b=e.Collider2D,v=e.Contact2DType,M=e.Camera,y=e.tween,L=e.LabelOutline,T=e.ParticleSystem2D,k=e.Vec2,G=e.Tween,R=e.Component},function(e){P=e.DifficultyManager},function(e){O=e.PowerUpManager},function(e){U=e.ComboManager},function(e){A=e.TimerManager},function(e){E=e.ScoreManager},function(e){x=e.GameStateManager},function(e){z=e.MovementController},function(e){N=e.CollisionManager},function(e){B=e.SaveSystemManager},function(e){I=e.Loot}],execute:function(){var D,Z,V,H,F,W,K,_,j,q,J,X,Y,Q,$,ee,te,oe,ie,ae,re,ne,se,le,ce,he,ue,pe,me,de,ge,fe,Ce,Se,we;r._RF.push({},"7063endIqJLMKsKMgZG6uir","bird",void 0);var be=n.ccclass,ve=n.property;e("bird",(D=be("bird"),Z=ve({type:s}),V=ve({type:l}),H=ve({type:l}),F=ve({type:l}),W=ve({type:s}),K=ve({type:l}),_=ve({type:l}),j=ve({type:c}),q=ve({type:h}),J=ve({type:u}),X=ve({type:p}),Y=ve({type:p}),Q=ve({type:p}),$=ve({type:p}),ee=ve({type:p}),te=ve({type:p}),D((ae=t((ie=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).difficultyManager=null,t.powerUpManager=null,t.comboManager=null,t.timerManager=null,t.scoreManager=null,t.gameStateManager=null,t.movementController=null,t.collisionManager=null,t.saveSystemManager=null,t.mainCamera=null,t.originalCameraPosition=new m,t.originalCameraZoom=1,t.cameraShakeTween=null,t.cameraZoomTween=null,t.startPos=new m(0,130,0),t.pipeFlipNode=null,t.lootBeingCarried=null,t.originalColor=new d(255,255,255,255),t.originalScale=new m(1,1,1),t.ropeGraphics=null,t.ropeWidth=3,t.ropeColor=new d(139,69,19,255),t.ropeSegments=10,i(t,"currentScoreLabel",ae,a(t)),i(t,"comboLabel",re,a(t)),i(t,"powerUpStatusLabel",ne,a(t)),i(t,"plusOneScoreLabel",se,a(t)),i(t,"difficultyLabel",le,a(t)),i(t,"ropeNode",ce,a(t)),i(t,"timerBar",he,a(t)),i(t,"clawAnim",ue,a(t)),i(t,"graphics",pe,a(t)),i(t,"audioSource",me,a(t)),i(t,"sfxTouch",de,a(t)),i(t,"sfxLootCollect",ge,a(t)),i(t,"sfxRareLoot",fe,a(t)),i(t,"sfxPowerUpCollect",Ce,a(t)),i(t,"sfxObstacleHit",Se,a(t)),i(t,"sfxGameOver",we,a(t)),t.onTouchStart=function(){!t.gameStateManager.gameActive||t.movementController.isCurrentlyMoving||t.movementController.isCurrentlyReturning||(t.audioSource&&t.sfxTouch?(console.log("Mencoba memainkan suara sfxTouch..."),t.audioSource.playOneShot(t.sfxTouch,1),console.log("Perintah playOneShot telah dikirim.")):console.log("Tidak bisa memutar suara. audioSource:",t.audioSource,"sfxTouch:",t.sfxTouch),t.collisionManager.notifyStartMove(),t.movementController.startMoving())},t.glowTween=null,t.sparkleTweens=[],t}o(t,e);var r=t.prototype;return r.onLoad=function(){console.log("Bird component loading"),g&&(g.getScene().birdInstance=this),this.initializeCamera(),this.initializeRopeGraphics();var e=this.node.getComponent(f);e&&(this.originalColor=e.color.clone()),this.originalScale=this.node.scale.clone(),this.difficultyManager=new P,this.powerUpManager=new O,this.comboManager=new U,this.timerManager=new A,this.scoreManager=new E,this.gameStateManager=new x,this.collisionManager=new N,this.saveSystemManager=new B,this.node.setPosition(this.startPos),this.movementController=new z(this.node),this.movementController.setCallbacks(this.onReturnComplete.bind(this),this.onBoundaryHit.bind(this),this.onTargetReached.bind(this)),this.movementController.setDropLootCallback(this.dropLoot.bind(this)),this.movementController.init(),this.collisionManager.setCallbacks({onObstacleHit:this.onObstacleHit.bind(this),onLootCollected:this.onLootCollected.bind(this),onPowerUpCollected:this.onPowerUpCollected.bind(this),onReturnAfterCollect:this.onReturnAfterCollect.bind(this)}),this.collisionManager.setStartPos(this.startPos),this.collisionManager.setBirdComponent(this);var t=C("pipe-flip");t&&(this.collisionManager.setPipeFlipNode(t),this.pipeFlipNode=t,this.difficultyManager.setPipeFlipNode(t)),S.on(w.EventType.TOUCH_START,this.onTouchStart,this);var o=this.getComponent(b);o&&o.on(v.BEGIN_CONTACT,this.onCollision,this)},r.initializeRopeGraphics=function(){console.log("Initializing rope graphics..."),this.ropeNode?(console.log("Using assigned ropeNode from editor"),this.ropeGraphics=this.ropeNode.getComponent(h),this.ropeGraphics||(console.log("Adding Graphics component to ropeNode"),this.ropeGraphics=this.ropeNode.addComponent(h))):this.graphics?(console.log("Using existing graphics component"),this.ropeGraphics=this.graphics):(console.log("Creating new Graphics component on bird node"),this.ropeGraphics=this.node.addComponent(h)),this.ropeGraphics?(this.ropeGraphics.lineWidth=this.ropeWidth,this.ropeGraphics.strokeColor=this.ropeColor,console.log("Rope graphics initialized successfully")):console.error("Failed to initialize rope graphics!")},r.initializeCamera=function(){console.log("DIAGNOSTIC: Mencoba menginisialisasi kamera...");var e=C("Canvas/Main Camera");e?(console.log("DIAGNOSTIC: Node Kamera ditemukan dengan nama '"+e.name+"'."),this.mainCamera=e.getComponent(M),this.mainCamera?(this.originalCameraPosition=e.position.clone(),this.originalCameraZoom=this.mainCamera.zoom,console.log("SUCCESS: Kamera berhasil diinisialisasi untuk efek.")):console.error("ERROR: Node Kamera ditemukan, TAPI komponen 'Camera' tidak ada!")):console.error("ERROR: MAIN CAMERA NOT FOUND! Pastikan nama Node Kamera Anda adalah 'Main Camera' atau 'Camera'.")},r.triggerCameraShake=function(e,t,o){if(void 0===e&&(e=10),void 0===t&&(t=.3),void 0===o&&(o=!0),console.log("DIAGNOSTIC: triggerCameraShake dipanggil!"),this.mainCamera&&this.mainCamera.node){console.log("DIAGNOSTIC: Memulai efek Camera Shake..."),this.cameraShakeTween&&this.cameraShakeTween.stop(),this.cameraZoomTween&&this.cameraZoomTween.stop();var i=this.mainCamera.node,a=this.originalCameraPosition.clone();if(o){this.cameraZoomTween=y(this.mainCamera).to(.1,{zoom:1.1*this.originalCameraZoom},{easing:"sineOut"}).to(t-.1,{zoom:this.originalCameraZoom},{easing:"sineIn"}).start()}var r=t/12;this.cameraShakeTween=y(i);for(var n=0;n<12;n++){var s=e*(1-n/12*.8),l=(Math.random()-.5)*s,c=(Math.random()-.5)*s;this.cameraShakeTween=this.cameraShakeTween.to(r,{position:new m(a.x+l,a.y+c,a.z)},{easing:"sineInOut"})}this.cameraShakeTween=this.cameraShakeTween.to(2*r,{position:a},{easing:"sineOut"}).start()}else console.error("ERROR: Gagal menjalankan Camera Shake karena referensi 'this.mainCamera' adalah NULL.")},r.triggerCameraZoom=function(e,t,o){if(void 0===e&&(e=1.2),void 0===t&&(t=.4),void 0===o&&(o=!1),console.log("DIAGNOSTIC: triggerCameraZoom dipanggil!"),this.mainCamera){console.log("DIAGNOSTIC: Memulai efek Camera Zoom..."),this.cameraZoomTween&&this.cameraZoomTween.stop();var i=this.originalCameraZoom*e,a=t/2;this.cameraZoomTween=y(this.mainCamera).to(a,{zoom:i},{easing:"backOut"}).to(a,{zoom:this.originalCameraZoom},{easing:"backIn"}).start(),o&&this.triggerLightShake()}else console.error("ERROR: Gagal menjalankan Camera Zoom karena referensi 'this.mainCamera' adalah NULL.")},r.triggerLightShake=function(e,t){if(void 0===e&&(e=5),void 0===t&&(t=.2),this.mainCamera&&this.mainCamera.node){var o=this.mainCamera.node,i=this.originalCameraPosition.clone(),a=t/6;this.cameraShakeTween&&this.cameraShakeTween.stop(),this.cameraShakeTween=y(o);for(var r=0;r<6;r++){var n=e*(1-r/6),s=(Math.random()-.5)*n,l=(Math.random()-.5)*n;this.cameraShakeTween=this.cameraShakeTween.to(a,{position:new m(i.x+s,i.y+l,i.z)})}this.cameraShakeTween=this.cameraShakeTween.to(a,{position:i}).start()}},r.start=function(){console.log("Bird component starting"),this.saveSystemManager&&this.saveSystemManager.loadBestScores(),this.comboLabel&&(this.comboManager.comboLabel=this.comboLabel),this.powerUpStatusLabel&&(this.powerUpManager.powerUpStatusLabel=this.powerUpStatusLabel),this.powerUpManager.setClawSizeCallback(this.onClawSizeChanged.bind(this)),this.powerUpManager.setPowerUpEffectCallback(this.onPowerUpEffectChanged.bind(this)),this.powerUpManager.setPowerUpActivationCallback(this.showPowerUpActivationText.bind(this)),this.currentScoreLabel&&this.scoreManager.setScoreLabel(this.currentScoreLabel),this.plusOneScoreLabel&&this.scoreManager.setPlusOneLabel(this.plusOneScoreLabel),this.comboLabel&&this.scoreManager.setComboLabel(this.comboLabel),this.difficultyLabel&&(this.difficultyManager.difficultyLabel=this.difficultyLabel,this.difficultyLabel.node.active=!1,this.difficultyManager.reset()),this.timerBar&&this.timerManager.setTimerBar(this.timerBar),this.difficultyLabel&&(this.difficultyManager.difficultyLabel=this.difficultyLabel),this.timerManager.setGameOverCallback(this.onGameOver.bind(this)),console.log("Bird start completed - Timer active:",this.timerManager.isActive())},r.showPowerUpActivationText=function(e){var t=new l("powerUpActivationText"),o=t.addComponent(s),i="",a=d.WHITE;switch(e){case"slowTime":i="SLOWER TIME!",a=new d(100,200,255,255);break;case"bigClaw":i="BIG CLAW!",a=new d(255,215,0,255);break;case"doubleScore":i="2X SCORE!",a=new d(255,100,100,255)}o.string=i,o.color=a,o.fontSize=32;var r=t.addComponent(L);r.color=d.BLACK,r.width=2,this.node.parent.addChild(t),t.setPosition(new m(0,150,0)),t.setScale(new m(0,0,0)),y(t).to(.3,{scale:new m(1.1,1.1,1)},{easing:"backOut"}).delay(1.5).to(.3,{scale:new m(0,0,0)},{easing:"backIn"}).call((function(){t.destroy()})).start()},r.onCollision=function(e,t,o){this.gameStateManager.gameActive&&this.movementController.isCurrentlyMoving&&!this.movementController.isCurrentlyReturning&&this.collisionManager&&this.collisionManager.onCollision(e,t,o)},r.onObstacleHit=function(){console.log("Menabrak rintangan! Memicu SHAKE kuat."),this.triggerCameraShake(18,.5,!0),this.audioSource&&this.sfxObstacleHit&&this.audioSource.playOneShot(this.sfxObstacleHit,1),console.log("Combo: Obstacle hit, resetting combo."),this.comboManager.resetCombo(),this.collisionManager.getIsCarryingLoot()&&this.dropLoot(),this.movementController.forceReturn()},r.onLootCollected=function(e){console.log("Mengambil loot normal. Tidak ada efek kamera."),this.catchLoot(e),this.movementController.forceReturn()},r.onPowerUpCollected=function(e,t){console.log("Mengambil Power-Up! Memicu SHAKE medium."),this.triggerCameraShake(12,.4,!1),this.catchLoot(t),this.movementController.forceReturn()},r.onReturnComplete=function(){var e=this;console.log("=== RETURN COMPLETE ===");var t=this.collisionManager.processReturnedLoot();if(t&&t.loot&&t.loot.isValid){var o;console.log("Combo: Loot collected successfully, updating combo."),this.comboManager.updateCombo();var i=t.loot.worldPosition.clone(),a=this.addScore(t.type);this.timerManager&&this.timerManager.addTime(2),"rareLoot"===t.type?(this.audioSource&&this.sfxRareLoot&&this.audioSource.playOneShot(this.sfxRareLoot,1),this.triggerCameraShake(25,.6,!0),this.scheduleOnce((function(){e.triggerCameraZoom(1.5,.8,!1)}),.2),this.showRareLootNotification(),this.showRareLootCollectionEffect(i)):"normal"!==t.type&&"rareLoot"!==t.type?(this.audioSource&&this.sfxPowerUpCollect&&this.audioSource.playOneShot(this.sfxPowerUpCollect,1),this.powerUpManager.activatePowerUp(t.type)):this.audioSource&&this.sfxLootCollect&&this.audioSource.playOneShot(this.sfxLootCollect,1),this.showLootEffect(i,t.type,a),I.instance?I.instance.handleLootCollection(t.loot):null!=(o=t.loot)&&o.isValid&&t.loot.destroy()}else console.log("Combo: Returned empty-handed, resetting combo."),this.comboManager.resetCombo();this.collisionManager.resetCollisionState(),this.lootBeingCarried=null},r.showRareLootNotification=function(){var e=new l("rareLootNotification"),t=e.addComponent(s);t.string="RARE TREASURE!",t.color=new d(255,215,0,255),t.fontSize=20;var o=e.addComponent(L);o.color=new d(139,69,19,255),o.width=4,this.node.parent.addChild(e),e.setPosition(new m(0,120,0)),e.setScale(new m(0,0,0)),y(e).to(.4,{scale:new m(1.3,1.3,1)},{easing:"backOut"}).to(.1,{scale:new m(1.1,1.1,1)}).delay(1.5).to(.3,{scale:new m(0,0,0)},{easing:"backIn"}).call((function(){e.destroy()})).start(),y(e).by(.1,{angle:5}).by(.2,{angle:-10}).by(.1,{angle:5}).repeatForever().start()},r.showRareLootCollectionEffect=function(e){var t=new l("rareLootCollectionEffect");this.node.parent.addChild(t),t.setWorldPosition(e);var o=t.addComponent(T);o.preview=!0,o.autoRemoveOnFinish=!0,o.duration=.5,o.emissionRate=150,o.life=1.2,o.lifeVar=.4,o.startSize=15,o.startSizeVar=8,o.endSize=2,o.angle=90,o.angleVar=360,o.speed=120,o.speedVar=50,o.gravity=new k(0,-98),o.startColor=new d(255,215,0,255),o.endColor=new d(255,255,150,0);var i=new l("rareGlow");t.addChild(i);var a=i.addComponent(h);a.fillColor=new d(255,215,0,100),a.circle(0,0,10),a.fill(),y(i).to(.8,{scale:new m(8,8,1)},{easing:"sineOut"}).start(),y(a).to(.8,{fillColor:new d(255,215,0,0)}).start(),this.scheduleOnce((function(){t&&t.isValid&&t.destroy()}),2)},r.catchLoot=function(e){this.lootBeingCarried=e,e.parent!==this.node&&e.setParent(this.node),e.setPosition(new m(0,-20,0))},r.addScore=function(e){var t;console.log("=== ADDING SCORE (Tipe Loot: "+e+") ===");var o=this.comboManager.getComboMultiplier(),i=null!=(t=this.powerUpManager)&&t.isDoubleScoreActive()?2:1,a=1;"rareLoot"===e&&(a=I.getRareLootScore());var r=a*o*i;r=Math.floor(r),console.log("Kalkulasi Skor: base("+a+") x combo("+o+") x doubleScore("+i+") = "+r);var n=this.scoreManager.getCurrentScore();return this.scoreManager.setCurrentScore(n+r),this.difficultyManager.updateDifficulty(this.scoreManager.getCurrentScore()),r},r.updateScoreDisplay=function(){this.scoreManager&&this.currentScoreLabel&&(this.currentScoreLabel.string=this.scoreManager.getCurrentScore().toString(),this.currentScoreLabel.node.active=!0)},r.onBoundaryHit=function(){this.movementController.forceReturn()},r.onTargetReached=function(){this.movementController.forceReturn()},r.onReturnAfterCollect=function(){},r.dropLoot=function(){this.collisionManager.getIsCarryingLoot()&&this.collisionManager.dropLoot()},r.startGame=function(){var e,t;this.scoreManager.resetScore(),this.scoreManager.setCurrentScore(0),this.updateScoreDisplay(),this.timerManager&&this.timerManager.setMode(10,!0),this.internalStartGame(),this.gameStateManager.startGame(),null!=(e=this.currentScoreLabel)&&e.node&&(this.currentScoreLabel.node.active=!0,this.currentScoreLabel.string="0"),null!=(t=this.difficultyLabel)&&t.node&&(this.difficultyLabel.node.active=!0,this.difficultyManager.reset()),this.timerBar&&(this.timerBar.active=!0)},r.startChallengeMode=function(){console.log("CHALLENGE MODE STARTED"),this.timerManager&&this.timerManager.setMode(30,!1),this.internalStartGame()},r.internalStartGame=function(){var e,t;this.gameStateManager.startGame(),this.timerManager.startTimer(),this.scoreManager.setCurrentScore(0),this.updateScoreDisplay(),null!=(e=this.currentScoreLabel)&&e.node&&(this.currentScoreLabel.node.active=!0,this.currentScoreLabel.string="0"),null!=(t=this.difficultyLabel)&&t.node&&(this.difficultyLabel.node.active=!0,this.difficultyManager.reset()),this.timerBar&&(this.timerBar.active=!0)},r.stopGame=function(){this.gameStateManager.stopGame()},r.resetGame=function(){var e,t;this.gameStateManager.resetGame(),this.movementController.resetPosition(),this.scoreManager.resetScore(),this.updateScoreDisplay(),this.timerManager.resetTimer(),this.timerManager.stopTimer(),this.difficultyManager.reset(),this.comboManager.resetCombo(),this.powerUpManager.clearAllPowerUps(),this.collisionManager.resetCollisionState(),this.resetAllVisualEffects(),this.resetCameraEffects();var o=C("pipe-flip");if(o){var i=o.getComponent("pipeMovement");i&&i.resetPosition&&i.resetPosition()}this.plusOneScoreLabel&&(this.plusOneScoreLabel.active=!1),null!=(e=this.currentScoreLabel)&&e.node&&(this.currentScoreLabel.node.active=!0,this.currentScoreLabel.string="0"),null!=(t=this.difficultyLabel)&&t.node&&(this.difficultyLabel.node.active=!1),this.timerBar&&(this.timerBar.active=!0),I.instance&&I.instance.resetLootSystem(),this.lootBeingCarried&&this.lootBeingCarried.isValid&&(this.lootBeingCarried.destroy(),this.lootBeingCarried=null)},r.resetCameraEffects=function(){this.mainCamera&&this.mainCamera.node&&(this.cameraShakeTween&&(this.cameraShakeTween.stop(),this.cameraShakeTween=null),this.cameraZoomTween&&(this.cameraZoomTween.stop(),this.cameraZoomTween=null),this.mainCamera.node.setPosition(this.originalCameraPosition),this.mainCamera.zoom=this.originalCameraZoom)},r.update=function(e){this.gameStateManager.gameActive&&(this.powerUpManager.updatePowerUps(e),this.timerManager.updateTimer(e,this.powerUpManager.getTimeMultiplier()),this.movementController.autoRotate(e),this.movementController.moveDown(e),this.drawRope(),this.collisionManager&&this.collisionManager.trackPipeFlipMovement())},r.drawRope=function(){if(this.ropeGraphics&&this.gameStateManager.gameActive&&(this.ropeGraphics.clear(),this.movementController.isCurrentlyMoving||this.movementController.isCurrentlyReturning)){this.ropeGraphics.lineWidth=this.ropeWidth,this.ropeGraphics.strokeColor=this.ropeColor;var e=this.startPos,t=this.node.position,o=m.distance(e,t);o>5?this.drawCurvedRope(e,t,o):this.drawStraightRope(e,t)}},r.drawStraightRope=function(e,t){this.ropeGraphics&&(this.ropeGraphics.moveTo(e.x,e.y),this.ropeGraphics.lineTo(t.x,t.y),this.ropeGraphics.stroke())},r.drawCurvedRope=function(e,t,o){if(this.ropeGraphics){var i=Math.min(.1*o,20),a=(e.x+t.x)/2,r=(e.y+t.y)/2-i;this.ropeGraphics.moveTo(e.x,e.y),this.ropeGraphics.quadraticCurveTo(a,r,t.x,t.y),this.ropeGraphics.stroke(),this.drawRopeSegments(e,new m(a,r,0),t)}},r.testRope=function(){this.ropeGraphics?(this.ropeGraphics.clear(),this.ropeGraphics.lineWidth=5,this.ropeGraphics.strokeColor=d.RED,this.ropeGraphics.moveTo(0,0),this.ropeGraphics.lineTo(100,100),this.ropeGraphics.stroke(),console.log("Test rope drawn - check if red line appears")):console.error("ropeGraphics is null!")},r.drawRopeSegments=function(e,t,o){if(this.ropeGraphics)for(var i=this.ropeSegments,a=1;a<i;a++){var r=a/i,n=Math.pow(1-r,2)*e.x+2*(1-r)*r*t.x+Math.pow(r,2)*o.x,s=Math.pow(1-r,2)*e.y+2*(1-r)*r*t.y+Math.pow(r,2)*o.y;this.ropeGraphics.moveTo(n-2,s),this.ropeGraphics.lineTo(n+2,s),this.ropeGraphics.stroke()}},r.onClawSizeChanged=function(e){if(this.node&&this.node.isValid){this.node.scale.x!==e&&y(this.node).to(.3,{scale:new m(e,e,e)},{easing:"backOut"}).start();var t=this.getComponent(b);if(t&&t.size){var o=new k(30,30);t.size=new k(o.x*e,o.y*e)}}},r.onPowerUpEffectChanged=function(e,t){this.node&&this.node.isValid&&this.updateVisualState()},r.updateVisualState=function(){if(this.node&&this.node.isValid&&this.powerUpManager){var e=this.node.getComponent(f);if(e){G.stopAllByTarget(this.node);var t=this.originalColor.clone(),o=this.originalScale.clone(),i=!1;this.powerUpManager.isPowerUpActive("bigClaw")&&(t=new d(255,255,150,255),o=this.originalScale.clone().multiplyScalar(1.5)),this.powerUpManager.isPowerUpActive("slowTime")&&(t=new d(150,150,255,255)),this.powerUpManager.isPowerUpActive("doubleScore")&&(t=new d(255,150,150,255),i=!0),e.color=t,this.node.setScale(o);var a=this.getComponent(b);if(a&&a.size){var r=new k(30,30);a.size=new k(r.x*o.x,r.y*o.y)}i?this.addSparkleEffect():this.removeSparkleEffect()}}},r.addSparkleEffect=function(){this.removeSparkleEffect();var e=new l("SparkleEffect");this.node.addChild(e);for(var t=0;t<3;t++){var o=new l("Sparkle_"+t),i=o.addComponent(h);i.fillColor=new d(255,255,0,255),i.circle(0,0,3),i.fill(),e.addChild(o);var a=t/3*Math.PI*2;o.setPosition(40*Math.cos(a),40*Math.sin(a),0);var r=y(o).by(1,{angle:360}).repeatForever().start();this.sparkleTweens.push(r)}},r.removeSparkleEffect=function(){this.sparkleTweens.forEach((function(e){return null==e?void 0:e.stop()})),this.sparkleTweens=[];var e=this.node.getChildByName("SparkleEffect");e&&e.isValid&&e.destroy()},r.showLootEffect=function(e,t,o){var i=new l("lootEffect"),a=i.addComponent(s);a.string="+"+o,a.fontSize=28;var r=i.addComponent(L);r.color=d.BLACK,r.width=2;var n="string"==typeof t?t:I.lootTypeToPowerUpString(t);switch(n){case"slowTime":a.color=new d(100,200,255,255);break;case"bigClaw":a.color=new d(255,255,100,255);break;case"doubleScore":a.color=new d(255,100,100,255);break;case"rareLoot":a.color=new d(255,215,0,255),a.fontSize=36,r.color=new d(139,69,19,255),r.width=3;break;default:a.color=d.YELLOW}this.node.parent.addChild(i),i.setWorldPosition(e),"rareLoot"===n?y(i).to(.3,{position:new m(e.x,e.y+40,e.z),scale:new m(1.5,1.5,1.5)},{easing:"backOut"}).to(.5,{position:new m(e.x,e.y+100,e.z),scale:new m(1.2,1.2,1.2)}).to(.3,{scale:new m(0,0,0)}).call((function(){i&&i.isValid&&i.destroy()})).start():y(i).to(.8,{position:new m(e.x,e.y+80,e.z),scale:new m(1.2,1.2,1.2)}).to(.2,{scale:new m(0,0,0)}).call((function(){i&&i.isValid&&i.destroy()})).start()},r.resetAllVisualEffects=function(){this.updateVisualState()},r.onGameOver=function(){var e,t,o=this;this.audioSource&&this.sfxGameOver&&this.audioSource.playOneShot(this.sfxGameOver,1),this.gameStateManager.stopGame(),this.resetAllVisualEffects();var i=this.scoreManager.getCurrentScore(),a=this.isChallengeMode?"challenge":"normal";this.saveSystemManager.saveScore(i,a),localStorage.setItem("currentScore",i.toString()),localStorage.setItem("lastGameMode",a);var r="normal"===a?this.saveSystemManager.getCurrentBestScoreNormal():this.saveSystemManager.getCurrentBestScoreChallenge();localStorage.setItem("bestScore",r.toString()),localStorage.setItem("finalDifficulty",this.difficultyManager.getCurrentDifficultyConfig().description),null!=(e=this.difficultyLabel)&&e.node&&(this.difficultyLabel.node.active=!1),this.timerBar&&(this.timerBar.active=!1),null!=(t=this.currentScoreLabel)&&t.node&&(this.currentScoreLabel.node.active=!1),this.scheduleOnce((function(){return o.showResultScreen()}),.5)},r.showResultScreen=function(){var e=C("Canvas/resultScreen")||C("resultScreen");e?e.active=!0:console.error("Node resultScreen tidak dapat ditemukan di scene!")},r.completeReset=function(){var e,t;this.gameStateManager.resetGame(),this.movementController.resetPosition(),this.scoreManager.resetScore(),this.timerManager.resetTimer(),this.timerManager.stopTimer(),this.difficultyManager.reset(),this.comboManager.resetCombo(),this.powerUpManager.clearAllPowerUps(),this.collisionManager.resetCollisionState(),this.ropeGraphics&&this.ropeGraphics.clear(),this.resetCameraEffects();var o=C("pipe-flip");if(o){var i=o.getComponent("pipeMovement");i&&i.resetPosition&&i.resetPosition()}this.plusOneScoreLabel&&(this.plusOneScoreLabel.active=!1),null!=(e=this.currentScoreLabel)&&e.node&&(this.currentScoreLabel.node.active=!1,this.currentScoreLabel.string="0"),null!=(t=this.difficultyLabel)&&t.node&&(this.difficultyLabel.node.active=!1),this.timerBar&&(this.timerBar.active=!1),I.instance&&I.instance.resetLootSystem()},r.getCurrentPosition=function(){return this.node.position.clone()},r.setPosition=function(e){this.node.setPosition(e)},r.setRotation=function(e){this.movementController.setRotation(e)},r.setScale=function(e){this.node.setScale(e)},r.addChildToNode=function(e){this.node.addChild(e)},r.getParentNode=function(){return this.node.parent},r.getNode=function(){return this.node},r.pauseGame=function(){this.gameStateManager.pauseGame()},r.getActivePowerUpsInfo=function(){return this.powerUpManager.getActivePowerUpsInfo()},r.activateTestPowerUp=function(e){this.powerUpManager.activatePowerUp(e)},r.onDestroy=function(){this.resetCameraEffects(),S.off(w.EventType.TOUCH_START,this.onTouchStart,this);var e=this.getComponent(b);e&&e.off(v.BEGIN_CONTACT,this.onCollision,this)},t}(R)).prototype,"currentScoreLabel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ie.prototype,"comboLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(ie.prototype,"powerUpStatusLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ie.prototype,"plusOneScoreLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ie.prototype,"difficultyLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ie.prototype,"ropeNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ie.prototype,"timerBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ie.prototype,"clawAnim",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ie.prototype,"graphics",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ie.prototype,"audioSource",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ie.prototype,"sfxTouch",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ie.prototype,"sfxLootCollect",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ie.prototype,"sfxRareLoot",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(ie.prototype,"sfxPowerUpCollect",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ie.prototype,"sfxObstacleHit",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ie.prototype,"sfxGameOver",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=ie))||oe));r._RF.pop()}}}));

System.register("chunks:///_virtual/changeScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playScreen.ts","./LootSkinManager.ts"],(function(t){var e,n,i,o,r,a,l,c,s,u,h,p,b,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.SpriteFrame,s=t.Vec3,u=t.sys,h=t.Sprite,p=t.Color,b=t.Component},function(t){d=t.playScreen},function(t){f=t.LootSkinManager}],execute:function(){var S,k,g,y,w,B,m,C,v,I,L,_,H,N,A,E,z,K,P,T;r._RF.push({},"b331cQXvhlABbG9ih00/1Ti","changeScreen",void 0);var F=a.ccclass,W=a.property;t("changeScreen",(S=F("changeScreen"),k=W(l),g=W(l),y=W(l),w=W(l),B=W(l),m=W(l),C=W(c),v=W(c),S(((T=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"btnBack",_,o(e)),i(e,"btnHook",H,o(e)),i(e,"btnBird",N,o(e)),i(e,"btnCoin",A,o(e)),i(e,"btnHeart",E,o(e)),i(e,"birdNode",z,o(e)),i(e,"clawHookSprite",K,o(e)),i(e,"clawBirdSprite",P,o(e)),e.CLAW_SKIN_KEY="selected_claw_skin",e.LOOT_SKIN_KEY="selected_loot_skin",e}n(e,t);var r=e.prototype;return r.onLoad=function(){e.Instance=this,this.node.active=!1},r.start=function(){this.setupEventListeners(),this.node.setPosition(s.ZERO)},r.onEnable=function(){this.node.setPosition(s.ZERO),this.loadAndApplyPreferences()},r.setupEventListeners=function(){var t,e,n,i,o,r=this;null==(t=this.btnBack)||t.on("click",this.goBackToPlayScreen,this),null==(e=this.btnHook)||e.on("click",(function(){return r.selectClawSkin("hook")}),this),null==(n=this.btnBird)||n.on("click",(function(){return r.selectClawSkin("bird")}),this),null==(i=this.btnCoin)||i.on("click",(function(){return r.selectLootSkin("coin")}),this),null==(o=this.btnHeart)||o.on("click",(function(){return r.selectLootSkin("heart")}),this)},r.loadAndApplyPreferences=function(){if(f.Instance){var t=u.localStorage.getItem(this.CLAW_SKIN_KEY)||"bird",e=f.Instance.getCurrentLootSkin();console.log("Applying preferences: Claw ->",t,", Loot ->",e),this.applyClawSkin(t),this.updateButtonStates(t,e)}else console.error("GAGAL memuat preferensi: LootSkinManager.Instance tidak ditemukan!")},r.selectClawSkin=function(t){u.localStorage.setItem(this.CLAW_SKIN_KEY,t),this.applyClawSkin(t),this.updateButtonStates(t,f.Instance.getCurrentLootSkin())},r.selectLootSkin=function(t){f.Instance.setLootSkin(t),this.updateButtonStates(u.localStorage.getItem(this.CLAW_SKIN_KEY)||"bird",t)},r.applyClawSkin=function(t){if(this.birdNode){var e=this.birdNode.getComponent(h);if(e)switch(t){case"hook":this.clawHookSprite&&(e.spriteFrame=this.clawHookSprite);break;case"bird":default:this.clawBirdSprite&&(e.spriteFrame=this.clawBirdSprite)}else console.error("Node 'birdNode' tidak memiliki komponen Sprite!")}else console.error("Node 'birdNode' belum ditautkan di Inspector!")},r.updateButtonStates=function(t,e){this.resetButtonStates(),"hook"===t?this.highlightButton(this.btnHook):this.highlightButton(this.btnBird),"coin"===e?this.highlightButton(this.btnCoin):this.highlightButton(this.btnHeart)},r.resetButtonStates=function(){[this.btnHook,this.btnBird,this.btnCoin,this.btnHeart].forEach((function(t){if(t){t.setScale(1,1,1);var e=t.getComponent(h);e&&(e.color=p.WHITE)}}))},r.highlightButton=function(t){if(t){t.setScale(1.1,1.1,1.1);var e=t.getComponent(h);e&&(e.color=new p(200,255,200,255))}},r.goBackToPlayScreen=function(){var t;this.node.active=!1,null!=(t=d.Instance)&&t.node?d.Instance.node.active=!0:console.error("playScreen.Instance is not available!")},e}(b)).Instance=void 0,_=e((L=T).prototype,"btnBack",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(L.prototype,"btnHook",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(L.prototype,"btnBird",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(L.prototype,"btnCoin",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(L.prototype,"btnHeart",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(L.prototype,"birdNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(L.prototype,"clawHookSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(L.prototype,"clawBirdSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=L))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionManager.ts",["cc"],(function(o){var t,e,n,i,r,s;return{setters:[function(o){t=o.cclegacy,e=o._decorator,n=o.Collider2D,i=o.RigidBody2D,r=o.Vec2,s=o.Vec3}],execute:function(){var l;t._RF.push({},"f5172qBmT1CNq9AT7rRrigQ","CollisionManager",void 0);var a=e.ccclass;e.property,o("CollisionManager",a("CollisionManager")(l=function(){function o(){var o=this;this.callbacks=void 0,this.pipeFlipNode=null,this.lastPipeFlipPosition=new s,this.currentPipeFlipPosition=new s,this.ropeCheckInterval=.05,this.lastRopeCheckTime=0,this.startPos=new s(0,130,0),this.isCarryingLoot=!1,this.currentLoot=null,this.currentLootType="normal",this.birdComponent=null,this.originalLootParent=null,this._hasTriggeredReturnThisMove=!1,this.onCollision=function(t,e,n){if(console.log("[CollisionManager] onCollision called with:",e.node.name),o.callbacks&&!o._hasTriggeredReturnThisMove){var i=e.node.name;if(console.log("=== COLLISION DETECTED ==="),console.log("Collision with: "+i),console.log("Currently carrying loot: "+o.isCarryingLoot),o.isPipeCollision(e.node))return console.log("Collision with pipe detected - triggering obstacle hit"),o._hasTriggeredReturnThisMove=!0,void(o.callbacks.onObstacleHit&&o.callbacks.onObstacleHit());if(o.isLootCollision(e.node)&&!o.isCarryingLoot){console.log("=== LOOT COLLISION PROCESSING ==="),console.log("Loot node name:",i);var r=e.node;if(!r.getComponent("Loot"))if(r.parent&&r.parent.getComponent("Loot"))r=r.parent,console.log("[CollisionManager] Using parent node for loot:",r.name);else for(var s=0;s<r.children.length;s++)if(r.children[s].getComponent("Loot")){r=r.children[s],console.log("[CollisionManager] Using child node for loot:",r.name);break}if(!r.getComponent("Loot"))return void console.warn("[CollisionManager] No Loot component found on collision node!");var l=o.determineLootType(r);console.log("Loot type detected:",l),o.attachLootToClaw(r,l),o._hasTriggeredReturnThisMove=!0,"normal"===l?o.callbacks.onLootCollected(r):o.callbacks.onPowerUpCollected(l,r)}}}}var t=o.prototype;return t.getIsCarryingLoot=function(){return this.isCarryingLoot},t.getCurrentLoot=function(){return this.currentLoot},t.getCurrentLootType=function(){return this.currentLootType},t.setCallbacks=function(o){this.callbacks=o},t.setStartPos=function(o){this.startPos=o},t.setBirdComponent=function(o){this.birdComponent=o},t.setPipeFlipNode=function(o){this.pipeFlipNode=o,o&&(this.lastPipeFlipPosition=o.position.clone(),this.currentPipeFlipPosition=o.position.clone())},t.shouldCheckRopeCollision=function(){var o=Date.now()/1e3;return o-this.lastRopeCheckTime>this.ropeCheckInterval&&(this.lastRopeCheckTime=o,!0)},t.trackPipeFlipMovement=function(){this.pipeFlipNode&&(this.lastPipeFlipPosition.set(this.currentPipeFlipPosition),this.currentPipeFlipPosition.set(this.pipeFlipNode.position))},t.checkRopeCollision=function(){return this.checkRopeCollisionSimple()},t.checkRopeCollisionSimple=function(){if(!this.pipeFlipNode||!this.pipeFlipNode.isValid)return!1;var o=this.startPos.x,t=this.startPos.y;if(!this.birdComponent)return!1;var e=this.birdComponent.node.position.x,i=this.birdComponent.node.position.y,r=this.pipeFlipNode.getComponent(n);if(!r)return!1;var s=r.worldAABB,l=s.x,a=s.y,c=s.xMax,p=s.yMax;return this.lineIntersectsRectSimple(o,t,e,i,l,a,c,p)},t.lineIntersectsRectSimple=function(o,t,e,n,i,r,s,l){return o>=i&&o<=s&&t>=r&&t<=l||e>=i&&e<=s&&n>=r&&n<=l||(!!this.lineSegmentsIntersect(o,t,e,n,i,l,s,l)||(!!this.lineSegmentsIntersect(o,t,e,n,s,l,s,r)||(!!this.lineSegmentsIntersect(o,t,e,n,s,r,i,r)||!!this.lineSegmentsIntersect(o,t,e,n,i,r,i,l))))},t.lineSegmentsIntersect=function(o,t,e,n,i,r,s,l){return((o-i)*(l-r)-(t-r)*(s-i))*((e-i)*(l-r)-(n-r)*(s-i))<=0&&((s-e)*(t-n)-(l-n)*(o-e))*((i-e)*(t-n)-(r-n)*(o-e))<=0},t.dropLoot=function(){if(this.isCarryingLoot&&this.currentLoot){console.log("Dropping loot...");var o=this.currentLoot.worldPosition.clone();if(this.originalLootParent&&this.originalLootParent.isValid)this.currentLoot.setParent(this.originalLootParent);else{if(!this.birdComponent)return;this.currentLoot.setParent(this.birdComponent.node.parent)}this.currentLoot.setWorldPosition(o);var t=this.currentLoot.getComponent(i);if(t)try{t.enabled=!0,t.linearVelocity=new r(0,-100)}catch(o){console.error("Error enabling loot rigid body:",o)}var e=this.currentLoot.getComponent(n);e&&(e.enabled=!0),this.resetCollisionState()}},t.resetCollisionState=function(){console.log("Resetting collision state"),this.isCarryingLoot=!1,this.currentLoot=null,this.currentLootType="normal",this.originalLootParent=null,this._hasTriggeredReturnThisMove=!1},t.notifyStartMove=function(){this._hasTriggeredReturnThisMove=!1},t.isPipeCollision=function(o){var t,e=o.name.toLowerCase();return"pipe-flip"===e||e.includes("pipe")||e.startsWith("pipe")||(null==(t=o.parent)?void 0:t.name.toLowerCase().includes("pipe"))},t.isLootCollision=function(o){if(o.getComponent("Loot"))return!0;if(o.parent&&o.parent.getComponent("Loot"))return!0;for(var t=0;t<o.children.length;t++)if(o.children[t].getComponent("Loot"))return!0;return!1},t.attachLootToClaw=function(o,t){if(console.log("=== ATTACHING LOOT TO CLAW ==="),console.log("Loot type:",t),this.birdComponent){this.isCarryingLoot=!0,this.currentLoot=o,this.currentLootType=t,this.originalLootParent=o.parent;var e=o.getComponent(i);if(e)try{e.linearVelocity=new r(0,0),e.angularVelocity=0,this.birdComponent.scheduleOnce((function(){e&&e.isValid&&(e.enabled=!1)}),0)}catch(o){console.error("Error disabling loot rigid body:",o)}var l=o.getComponent(n);l&&(l.enabled=!1),o.setParent(this.birdComponent.node),o.setPosition(new s(0,-20,0)),console.log("Loot successfully attached to claw"),console.log("Carrying state:",this.isCarryingLoot),console.log("Current loot type:",this.currentLootType)}else console.error("Cannot attach loot, birdComponent is not set!")},t.determineLootType=function(o){var t=o.getComponent("Loot");if(t&&void 0!==t.lootType){var e=t.lootType.toString();return console.log("Loot type from component:",e),e}var n=o.name.toLowerCase();return n.includes("slowtime")?"slowTime":n.includes("bigclaw")?"bigClaw":n.includes("doublescore")?"doubleScore":"normal"},t.processReturnedLoot=function(){if(this.isCarryingLoot&&this.currentLoot&&this.currentLoot.isValid){var o=this.currentLoot,t=this.currentLootType;return console.log("=== PROCESSING RETURNED LOOT ==="),console.log("Loot type:",t),console.log("Loot node:",o.name),console.log("Loot is valid:",o.isValid),{loot:o,type:t}}return console.warn("No valid loot to process in processReturnedLoot"),{loot:null,type:"normal"}},o}())||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/ComboManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,i,n,c,s,a,r,b;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.initializerDefineProperty},function(o){i=o.cclegacy,n=o._decorator,c=o.Node,s=o.Label,a=o.Color,r=o.Vec3,b=o.tween}],execute:function(){var l,m,u,h,C;i._RF.push({},"61da0RR3HpFc7Zsa2wAykZ3","ComboManager",void 0);var p=n.ccclass,f=n.property;o("ComboManager",(l=p("ComboManager"),m=f(c),l((C=t((h=function(){function o(){e(this,"comboLabel",C,this),this.comboCount=0,this.lastScoreTime=0,this.comboTimeWindow=3,this.comboBonusMultiplier=.5}var t=o.prototype;return t.updateCombo=function(){var o=Date.now()/1e3;return o-this.lastScoreTime<=this.comboTimeWindow?this.comboCount++:this.comboCount=1,this.lastScoreTime=o,this.comboCount>=2&&this.showComboEffect(),this.comboCount},t.showComboEffect=function(){var o=this;if(this.comboLabel){this.comboLabel.active=!0;var t=this.comboLabel.getComponent(s);t&&(t.string="COMBO x"+this.comboCount+"!",this.comboCount>=5?t.color=new a(255,0,255,255):this.comboCount>=3?t.color=new a(255,165,0,255):t.color=new a(255,255,0,255)),this.comboLabel.setPosition(new r(0,100,0)),b(this.comboLabel).to(.2,{scale:new r(1.3,1.3,1)}).to(.2,{scale:new r(1,1,1)}).delay(1).to(.3,{position:new r(0,130,0),opacity:0}).call((function(){o.comboLabel.active=!1,o.comboLabel.opacity=255,o.comboLabel.scale=new r(1,1,1)})).start()}},t.getComboBonus=function(){return this.comboCount<=1?0:Math.floor((this.comboCount-1)*this.comboBonusMultiplier)},t.getComboMultiplier=function(){return this.comboCount>=2?this.comboCount:1},t.resetCombo=function(){this.comboCount=0,this.lastScoreTime=0,this.comboLabel&&(this.comboLabel.active=!1)},o}()).prototype,"comboLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=h))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/demo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var c;e._RF.push({},"43148otzNtCOouZcAWneuoe","demo",void 0);var u=n.ccclass;n.property,t("demo",u("demo")(c=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/DifficultyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,l,n,r,p,o,u,c;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.initializerDefineProperty},function(i){l=i.cclegacy,n=i._decorator,r=i.Label,p=i.tween,o=i.Vec3,u=i.Color,c=i.Node}],execute:function(){var f,s,a;l._RF.push({},"57411bqX4BBg6ZeD7B5Bb1O","DifficultyManager",void 0);n.ccclass;var d=n.property;i("DifficultyManager",(f=d(r),a=e((s=function(){function i(){t(this,"difficultyLabel",a,this),this.currentDifficultyLevel=0,this.difficultyConfigs=[{scoreThreshold:0,pipeSpeedMultiplier:1,pipeScaleMultiplier:1,timeBonus:2,description:"Easy"},{scoreThreshold:5,pipeSpeedMultiplier:1.3,pipeScaleMultiplier:1.05,timeBonus:1.8,description:"Normal"},{scoreThreshold:10,pipeSpeedMultiplier:1.6,pipeScaleMultiplier:1.1,timeBonus:1.5,description:"Hard"},{scoreThreshold:15,pipeSpeedMultiplier:2,pipeScaleMultiplier:1.15,timeBonus:1.2,description:"Expert"},{scoreThreshold:20,pipeSpeedMultiplier:2.5,pipeScaleMultiplier:1.2,timeBonus:1,description:"Master"},{scoreThreshold:25,pipeSpeedMultiplier:3,pipeScaleMultiplier:1.25,timeBonus:.8,description:"Insane"}],this.pipeFlipNode=null}var e=i.prototype;return e.setPipeFlipNode=function(i){this.pipeFlipNode=i},e.updateDifficulty=function(i){for(var e=0,t=this.difficultyConfigs.length-1;t>=0;t--)if(i>=this.difficultyConfigs[t].scoreThreshold){e=t;break}return e!==this.currentDifficultyLevel&&(this.currentDifficultyLevel=e,this.updatePipeMovementSpeed(),this.updatePipeScale(),this.updateDifficultyDisplay(),this.showDifficultyChangeNotification(),!0)},e.getCurrentDifficultyConfig=function(){return this.difficultyConfigs[this.currentDifficultyLevel]},e.getTimeBonus=function(){return this.getCurrentDifficultyConfig().timeBonus},e.reset=function(){this.currentDifficultyLevel=0,this.updatePipeMovementSpeed(),this.updatePipeScale(),this.updateDifficultyDisplay()},e.updatePipeScale=function(){if(this.pipeFlipNode){var i=this.getCurrentDifficultyConfig().pipeScaleMultiplier;p(this.pipeFlipNode).to(.3,{scale:new o(i,i,1)},{easing:"backOut"}).start(),console.log("Ukuran pipa diubah: "+i.toFixed(2)+"x")}},e.updatePipeMovementSpeed=function(){if(this.pipeFlipNode){var i=this.pipeFlipNode.getComponent("pipeMovement");if(i&&"function"==typeof i.setSpeedMultiplier){var e=this.getCurrentDifficultyConfig().pipeSpeedMultiplier;i.setSpeedMultiplier(e)}}},e.updateDifficultyDisplay=function(){if(this.difficultyLabel){var i=this.getCurrentDifficultyConfig();this.difficultyLabel.string=""+i.description;var e=[new u(0,255,0,255),new u(255,255,0,255),new u(255,165,0,255),new u(255,0,0,255),new u(128,0,128,255),new u(255,0,255,255)];this.currentDifficultyLevel<e.length&&(this.difficultyLabel.color=e[this.currentDifficultyLevel])}},e.showDifficultyChangeNotification=function(){if(this.difficultyLabel&&this.difficultyLabel.node.parent){var i=new c("DifficultyNotification"),e=i.addComponent(r);e.string="DIFFICULTY: "+this.getCurrentDifficultyConfig().description.toUpperCase()+"!",e.fontSize=24,e.color=new u(255,255,0,255),this.difficultyLabel.node.parent.addChild(i),i.setPosition(new o(0,0,0)),p(i).to(.3,{scale:new o(1.2,1.2,1)}).to(.3,{scale:new o(1,1,1)}).delay(1).to(.5,{position:new o(0,50,0),opacity:0}).call((function(){return i.destroy()})).start()}},i}()).prototype,"difficultyLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s));l._RF.pop()}}}));

System.register("chunks:///_virtual/gameInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playScreen.ts","./GameStateManager.ts","./bird.ts","./Loot.ts"],(function(e){var n,o,t,r,i,a,s,c,l,m,u;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,r=e.director,i=e.find,a=e.Vec3,s=e.Component},function(e){c=e.playScreen},function(e){l=e.GameStateManager},function(e){m=e.bird},function(e){u=e.Loot}],execute:function(){var d;o._RF.push({},"c34b7G2Rw9DY4P8ZrF9uJM8","gameInit",void 0);var g=t.ccclass;t.property,e("gameInit",g("gameInit")(d=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.start=function(){var e=this;(console.log("=== Game initialization started ==="),this.node.getComponent(l))||this.node.addComponent(l).setTouchCallback(this.onGlobalTouchStart.bind(this));this.node.on("game-reset",this.resetGame,this),r.on("game-reset",this.resetGame,this),console.log("Game reset event listeners registered"),this.scheduleOnce((function(){e.initializeScreens()}),.1)},t.initializeScreens=function(){console.log("=== Initializing screens ===");var e=i("Canvas/playScreen")||i("playScreen");if(e){e.active=!0,console.log("Play screen activated");var n=e.getComponent(c);n&&n.initializeScreen&&n.initializeScreen()}else console.error("playScreen node not found!");var o=i("Canvas/npmScreen")||i("npmScreen");o&&(o.active=!1,console.log("NPM screen hidden"));var t=i("Canvas/resultScreen")||i("resultScreen");if(t){console.log("Result screen found:",t.name),t.getComponent("resultScreen")?console.log("Result screen component found and initialized"):console.error("Result screen component not found!"),t.active=!1,console.log("Result screen hidden (ready for game over)")}else{console.error("Result screen node not found during initialization!");var r=i("Canvas");r&&console.log("Available Canvas children:",r.children.map((function(e){return e.name})))}var a=i("bird");if(a){var s=a.getComponent(m);s&&(s.stopGame(),console.log("Game stopped, waiting for play button"))}else console.error("Bird node not found!")},t.onGlobalTouchStart=function(){var e=i("bird");if(e){var n=e.getComponent(m);n&&n.onTouchStart&&n.onTouchStart()}},t.resetGame=function(){var e=this;console.log("=== RESET GAME EVENT RECEIVED ==="),localStorage.removeItem("finalDifficulty"),localStorage.removeItem("currentScore"),localStorage.removeItem("bestScore"),console.log("LocalStorage cleared in gameInit reset");var n=i("bird");if(n){var o=n.getComponent(m);o&&(o.completeReset(),console.log("Bird complete reset completed"))}if(u.instance)u.instance.resetLootSystem(),console.log("Loot system reset via instance");else{var t=i("loot-container");if(t){var r=t.getComponent(u);r&&(r.resetLootSystem(),console.log("Loot system reset via component"))}}this.scheduleOnce((function(){e.forceShowPlayScreen()}),.1),console.log("Game reset completed with force playScreen display")},t.forceShowPlayScreen=function(){console.log("=== GameInit: FORCE SHOWING PLAY SCREEN ===");var e=i("Canvas/playScreen")||i("playScreen");if(e){if(e.active=!0,e.setPosition(new a(0,0,0)),e.setScale(new a(1,1,1)),e.parent){var n=e.parent.children.length;e.setSiblingIndex(n-1)}var o=e.getComponent(c);o&&(o.initializeScreen&&o.initializeScreen(),o.resetScreen&&o.resetScreen()),console.log("GameInit: PlayScreen force displayed"),console.log("PlayScreen status:",{active:e.active,position:e.position.toString(),scale:e.scale.toString()})}},t.onDestroy=function(){this.node.off("game-reset",this.resetGame,this),r.off("game-reset",this.resetGame,this),console.log("GameInit destroyed, event listeners cleaned up")},o}(s))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameStateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,a;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,s=t.input,a=t.Input}],execute:function(){i._RF.push({},"190dc2xBQJFxZ7EZxb8j/F5","GameStateManager",void 0),t("GameStateManager",function(){function t(){var t=this;this._gameActive=!1,this._isPaused=!1,this._previousGameActiveState=!1,this.onTouchCallback=null,this.score=0,this._gameTime=60,this._timeRemaining=this._gameTime,this.onTouchStart=function(){t.onTouchCallback&&t.onTouchCallback()},this.onTouchStart=function(){t.onTouchCallback&&t.onTouchCallback()}}var i=t.prototype;return i.startGame=function(){this._gameActive=!0,this._isPaused=!1,this.registerTouchEvents()},i.pauseGame=function(){this._gameActive&&(this._previousGameActiveState=this._gameActive,this._gameActive=!1,this._isPaused=!0,this.unregisterTouchEvents())},i.resumeGame=function(){this._isPaused&&(this._gameActive=this._previousGameActiveState,this._isPaused=!1,this._gameActive&&this.registerTouchEvents())},i.stopGame=function(){this._gameActive=!1,this._isPaused=!1,this.unregisterTouchEvents()},i.resetGame=function(){this._gameActive=!1,this._isPaused=!1,this._previousGameActiveState=!1,this.unregisterTouchEvents()},i.setTouchCallback=function(t){this.onTouchCallback=t},i.registerTouchEvents=function(){s.off(a.EventType.TOUCH_START,this.onTouchStart,this),s.on(a.EventType.TOUCH_START,this.onTouchStart,this)},i.unregisterTouchEvents=function(){s.off(a.EventType.TOUCH_START,this.onTouchStart,this)},e(t,[{key:"gameActive",get:function(){return this._gameActive}},{key:"isPaused",get:function(){return this._isPaused}}]),t}()).currentBestScore=0,i._RF.pop()}}}));

System.register("chunks:///_virtual/guideScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playScreen.ts","./bird.ts"],(function(e){var n,i,o,t,s,r,c,l,d,a,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,c=e.Node,l=e.Vec3,d=e.Component},function(e){a=e.playScreen},function(e){u=e.bird}],execute:function(){var h,p,b,g,f,S,y,v;s._RF.push({},"614b7K6gJ1FBL5cLe+ECMXK","guideScreen",void 0);var C=r.ccclass,N=r.property;e("guideScreen",(h=C("guideScreen"),p=N(c),b=N(c),h(((v=function(e){function n(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=e.call.apply(e,[this].concat(s))||this,o(n,"btnBack",S,t(n)),o(n,"birdNode",y,t(n)),n.birdController=null,n}i(n,e);var s=n.prototype;return s.start=function(){n.Instance=this,console.log("GuideScreen start() called"),this.initialize()},s.initialize=function(){console.log("GuideScreen initialize() called"),this.btnBack?(this.btnBack.on("click",this.hideGuideScreen,this),console.log("Back button event listener added")):console.log("Back button not found!"),this.birdNode||(this.birdNode=this.node.scene.getChildByName("bird")),this.birdNode&&(this.birdController=this.birdNode.getComponent(u)),console.log("GuideScreen node active state:",this.node.active)},s.onEnable=function(){var e=this;this.node&&(console.log("GuideScreen onEnable - Position before reset:",this.node.position),this.node.setPosition(0,0,0),this.node.position=l.ZERO,this.node.setScale(1,1,1),this.node.setRotation(0,0,0,1),console.log("GuideScreen onEnable - Position after reset:",this.node.position),this.birdController||(this.birdNode?this.birdController=this.birdNode.getComponent(u):(this.birdNode=this.node.scene.getChildByName("bird"),this.birdNode&&(this.birdController=this.birdNode.getComponent(u)))),this.birdController&&(this.birdController.pauseGame(),console.log("Game paused in guide screen")),this.scheduleOnce((function(){console.log("GuideScreen final position check:",e.node.position),0===e.node.position.x&&0===e.node.position.y||(console.log("Position still not centered, forcing again..."),e.node.setPosition(0,0,0),e.node.position=l.ZERO)}),.1))},s.hideGuideScreen=function(){console.log("Hiding guide screen"),this.node.active=!1,a.Instance?(console.log("Showing play screen"),a.Instance.node.setPosition(0,0,0),a.Instance.node.position=l.ZERO,a.Instance.node.active=!0,a.Instance.setupEventListeners(),a.Instance.initializeScreen()):console.log("PlayScreen instance not found!")},s.forceResetPosition=function(){console.log("Forcing position reset for guideScreen"),this.node.setPosition(0,0,0),this.node.position=l.ZERO,this.node.setScale(1,1,1),this.node.setRotation(0,0,0,1)},s.update=function(e){},n}(d)).Instance=void 0,S=n((f=v).prototype,"btnBack",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(f.prototype,"birdNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/Loot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LootSkinManager.ts"],(function(e){var t,n,o,i,a,r,s,l,c,u,p,h,d,f,w,L,m,C,g,v,b,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,l=e.Prefab,c=e.Node,u=e.Enum,p=e.Sprite,h=e.UITransform,d=e.instantiate,f=e.director,w=e.ParticleSystem2D,L=e.Color,m=e.tween,C=e.Graphics,g=e.randomRangeInt,v=e.Vec3,b=e.Component},function(e){y=e.LootSkinManager}],execute:function(){var S,T,O,P,A,R,k,E,M,_,I,x,z,V,U,N,W,F,B,D,G,Y,j,H,K;r._RF.push({},"87c4e/SsW5C0rs3sjAYjOi/","Loot",void 0);var q=s.ccclass,J=s.property,Q=e("LootType",function(e){return e.NORMAL="normal",e.SLOW_TIME="slowTime",e.BIG_CLAW="bigClaw",e.DOUBLE_SCORE="doubleScore",e.RARE_LOOT="rareLoot",e}({}));e("Loot",(S=q("Loot"),T=J({type:l,tooltip:"Prefab untuk loot. Harus diisi di Inspector!"}),O=J(c),P=J({type:[c]}),A=J({displayName:"Power-Up Chance (%)",range:[0,100]}),R=J({displayName:"Slow Time Chance (%)",range:[0,100]}),k=J({displayName:"Big Claw Chance (%)",range:[0,100]}),E=J({displayName:"Double Score Chance (%)",range:[0,100]}),M=J({displayName:"Rare Loot Chance (%)",range:[0,100]}),_=J({type:l,tooltip:"Prefab untuk rare loot"}),I=J({type:u(Q)}),S(((K=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"lootPrefab",V,i(t)),o(t,"spawnParent",U,i(t)),o(t,"maxLootCount",N,i(t)),o(t,"spawnPoints",W,i(t)),o(t,"powerUpChance",F,i(t)),o(t,"slowTimeChance",B,i(t)),o(t,"bigClawChance",D,i(t)),o(t,"doubleScoreChance",G,i(t)),o(t,"rareChance",Y,i(t)),o(t,"rareLootPrefab",j,i(t)),o(t,"lootType",H,i(t)),t.minDistance=60,t.spawnAreaWidth=200,t.spawnAreaMinY=-164,t.spawnAreaMaxY=-30,t.obstacleAreas=[],t.activeLoots=[],t._hasLoggedMissingPrefab=!1,t._spawnTimer=null,t}n(t,e);var r=t.prototype;return r.start=function(){var e=this;t.instance===this&&(console.log("Loot Manager Initialized."),this.scheduleOnce((function(){e.spawnInitialLoot()}),.5))},r.onLoad=function(){var e=this;null===t.instance&&null!==this.lootPrefab&&(t.instance=this),this.scheduleOnce((function(){e.applyCurrentSkin()}),.1)},r.applyCurrentSkin=function(){if(this.lootType===Q.NORMAL)if(y.Instance){var e=this.getComponent(p);if(e){var t=y.Instance.getCurrentLootSprite();t?e.spriteFrame=t:console.warn("Gagal menerapkan skin ke loot, SpriteFrame tidak ditemukan untuk skin: "+y.Instance.getCurrentLootSkin())}else console.error("Komponen Sprite tidak ditemukan pada node loot ini.")}else console.warn("Loot.applyCurrentSkin() dipanggil, tetapi LootSkinManager.Instance belum siap. Skin tidak akan diterapkan pada loot ini.")},t.getRareLootScore=function(){return 10},r.initObstacleAreas=function(){var e,t=null==(e=this.node.parent)?void 0:e.getChildByName("obstacles");if(t)for(var n=0;n<t.children.length;n++){var o=t.children[n];if("pipe-flip"===o.name){var i=o.getComponent(h);i&&this.obstacleAreas.push({x:o.position.x-i.width/2,y:o.position.y-i.height/2,width:i.width,height:i.height})}}},r.spawnInitialLoot=function(){this.clearAllLoots();for(var e=0;e<this.maxLootCount;e++)this.spawnLoot()},r.clearAllLoots=function(){for(;this.activeLoots.length>0;){var e=this.activeLoots.pop();e&&e.node&&e.node.isValid&&e.node.destroy()}},r.spawnLoot=function(){if(this.lootPrefab&&!(this.activeLoots.length>=this.maxLootCount)){var e=this.determineLootType(),n=e===Q.RARE_LOOT&&this.rareLootPrefab?this.rareLootPrefab:this.lootPrefab,o=d(n),i=o.getComponent(t);i||(i=o.addComponent(t)),i.lootType=e;var a=this.getValidSpawnPosition();o.setPosition(a),(this.spawnParent||this.node.parent).addChild(o),this.activeLoots.push({node:o,type:e}),e!==Q.NORMAL&&this.addPowerUpEffects(o,e)}},t.updateAllLootSkins=function(){var e=f.getScene().getComponentsInChildren(t);e.forEach((function(e){e.lootType===Q.NORMAL&&e.applyCurrentSkin()})),console.log("Updated "+e.length+" loot skins")},r.determineLootType=function(){if(100*Math.random()<this.rareChance)return Q.RARE_LOOT;if(100*Math.random()>this.powerUpChance)return Q.NORMAL;var e=this.slowTimeChance+this.bigClawChance+this.doubleScoreChance,t=Math.random()*e;return t<this.slowTimeChance?Q.SLOW_TIME:t<this.slowTimeChance+this.bigClawChance?Q.BIG_CLAW:Q.DOUBLE_SCORE},r.addPowerUpEffects=function(e,t){var n=new c("PowerUpParticles");e.addChild(n);var o,i,a=n.addComponent(w);switch(a.preview=!0,a.autoRemoveOnFinish=!1,a.duration=-1,a.emissionRate=20,a.life=1,a.lifeVar=.5,a.startSize=8,a.startSizeVar=3,a.endSize=2,a.endSizeVar=1,a.angle=90,a.angleVar=360,a.speed=30,a.speedVar=10,a.radialAccel=-50,a.radialAccelVar=10,t){case Q.SLOW_TIME:o=new L(0,150,255,255),i=new L(150,200,255,100);break;case Q.BIG_CLAW:o=new L(255,215,0,255),i=new L(255,255,150,100);break;case Q.DOUBLE_SCORE:o=new L(255,50,50,255),i=new L(255,150,150,100);break;case Q.RARE_LOOT:o=new L(255,0,255,255),i=new L(255,150,255,100);break;default:o=new L(255,255,255,255),i=new L(255,255,255,100)}a.startColor=o,a.endColor=i,this.addGlowEffect(e,o),t===Q.RARE_LOOT&&this.addRareLootSpecialEffect(e);var r=this.activeLoots.find((function(t){return t.node===e}));r&&(r.particles=a)},r.addRareLootSpecialEffect=function(e){var t=e.scale.clone(),n=t.clone().multiplyScalar(1.5);m(e).to(.5,{scale:n},{easing:"sineInOut"}).to(.5,{scale:t},{easing:"sineInOut"}).union().repeatForever().start(),m(e).by(1.5,{angle:360}).repeatForever().start(),this.addSparkleEffectToRareLoot(e)},r.addSparkleEffectToRareLoot=function(e){var t=new c("RareSparkleContainer");e.addChild(t);for(var n=0;n<4;n++){var o=new c("RareSparkle_"+n),i=o.addComponent(C);i.fillColor=new L(255,215,0,200),i.circle(0,0,4),i.fill(),t.addChild(o);var a=n/4*Math.PI*2;o.setPosition(25*Math.cos(a),25*Math.sin(a),0),m(o).by(2,{angle:360}).repeatForever().start(),m(i).to(.5,{fillColor:new L(255,255,255,255)}).to(.5,{fillColor:new L(255,215,0,150)}).union().repeatForever().start()}},r.addGlowEffect=function(e,t){var n=e.scale.clone(),o=n.clone().multiplyScalar(1.3);m(e).to(.8,{scale:o},{easing:"sineInOut"}).to(.8,{scale:n},{easing:"sineInOut"}).union().repeatForever().start(),m(e).by(3,{angle:360}).repeatForever().start()},r.getValidSpawnPosition=function(){if(this.spawnPoints&&this.spawnPoints.length>0)for(var e,t=[].concat(this.spawnPoints).sort((function(){return Math.random()-.5})),n=a(t);!(e=n()).done;){var o=e.value;if(this.isPositionValid(o.position))return o.position.clone()}for(var i=0;i<20;){var r=g(-this.spawnAreaWidth/2,this.spawnAreaWidth/2),s=g(this.spawnAreaMinY,this.spawnAreaMaxY),l=new v(r,s,0);if(this.isPositionValid(l))return l;i++}return new v(g(-this.spawnAreaWidth/2,this.spawnAreaWidth/2),g(this.spawnAreaMinY,this.spawnAreaMaxY),0)},r.isPositionValid=function(e){for(var t,n=a(this.activeLoots);!(t=n()).done;){var o=t.value;if(o.node&&o.node.isValid)if(v.distance(e,o.node.position)<this.minDistance)return!1}for(var i,r=a(this.obstacleAreas);!(i=r()).done;){var s=i.value;if(e.x>=s.x&&e.x<=s.x+s.width&&e.y>=s.y&&e.y<=s.y+s.height)return!1}return!0},r.handleLootCollection=function(e){var t=this;if(!e||!e.isValid)return null;var n=this.activeLoots.findIndex((function(t){return t.node===e}));if(-1===n)return e.destroy(),null;var o=this.activeLoots[n];return this.activeLoots.splice(n,1),o.type!==Q.NORMAL&&this.showPowerUpCollectionEffect(e,o.type),e.parent&&e.removeFromParent(),e.destroy(),this.scheduleOnce((function(){t.activeLoots.length<t.maxLootCount&&t.spawnLoot()}),.1),o},r.showPowerUpCollectionEffect=function(e,t){var n=new c("PowerUpCollectionEffect");this.spawnParent.addChild(n),n.setWorldPosition(e.worldPosition);var o,i=n.addComponent(w);switch(i.preview=!0,i.autoRemoveOnFinish=!0,i.duration=.3,i.emissionRate=100,i.life=.8,i.lifeVar=.3,i.startSize=12,i.startSizeVar=5,i.endSize=0,i.angle=90,i.angleVar=360,i.speed=80,i.speedVar=30,t){case Q.SLOW_TIME:o=new L(100,200,255,255);break;case Q.BIG_CLAW:o=new L(255,255,100,255);break;case Q.DOUBLE_SCORE:o=new L(255,100,100,255);break;case Q.RARE_LOOT:o=new L(255,0,255,255);break;default:o=new L(255,255,255,255)}i.startColor=o,i.endColor=new L(o.r,o.g,o.b,0),this.scheduleOnce((function(){n&&n.isValid&&n.destroy()}),1.5)},r.update=function(){var e=this;this.activeLoots=this.activeLoots.filter((function(e){return e.node&&e.node.isValid})),this.activeLoots.length<this.maxLootCount&&(this._spawnTimer||(this._spawnTimer=setTimeout((function(){e.spawnLoot(),e._spawnTimer=null}),500)))},r.onDestroy=function(){this._spawnTimer&&(clearTimeout(this._spawnTimer),this._spawnTimer=null)},r.resetLootSystem=function(){var e=this;this.unscheduleAllCallbacks(),this.clearAllLoots(),this.activeLoots=[],this.scheduleOnce((function(){e.spawnInitialLoot()}),.5)},t.getLootTypeFromNode=function(e){var n=e.getComponent(t);if(n&&void 0!==n.lootType)return n.lootType.toString();var o=e.name.toLowerCase();return o.includes("slowtime")?"slowTime":o.includes("bigclaw")?"bigClaw":o.includes("doublescore")?"doubleScore":o.includes("rareloot")?"rareLoot":"normal"},t.lootTypeToPowerUpString=function(e){switch(e){case Q.SLOW_TIME:return"slowTime";case Q.BIG_CLAW:return"bigClaw";case Q.DOUBLE_SCORE:return"doubleScore";case Q.RARE_LOOT:return"rareLoot";default:return"normal"}},r.getLootType=function(){return t.lootTypeToPowerUpString(this.lootType)},r.getActiveLootInfo=function(){var e=this.activeLoots.filter((function(e){return e.type===Q.NORMAL})).length,t=this.activeLoots.length-e;return{total:this.activeLoots.length,normal:e,powerUps:t}},r.getCurrentLootCount=function(){return this.activeLoots.length},r.getMaxLootCount=function(){return this.maxLootCount},r.setMaxLootCount=function(e){this.maxLootCount=Math.max(1,e)},r.forceSpawnLoot=function(){this.spawnLoot()},r.findLootDataByNode=function(e){return this.activeLoots.find((function(t){return t.node===e}))||null},r.removeLootFromTracking=function(e){var t=this.activeLoots.findIndex((function(t){return t.node===e}));return-1!==t&&(this.activeLoots.splice(t,1),!0)},t}(b)).instance=null,V=t((z=K).prototype,"lootPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"spawnParent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"maxLootCount",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),W=t(z.prototype,"spawnPoints",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(z.prototype,"powerUpChance",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),B=t(z.prototype,"slowTimeChance",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),D=t(z.prototype,"bigClawChance",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),G=t(z.prototype,"doubleScoreChance",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),Y=t(z.prototype,"rareChance",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),j=t(z.prototype,"rareLootPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"lootType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Q.NORMAL}}),x=z))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/LootSkinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Loot.ts"],(function(t){var e,n,o,i,r,s,a,l,c,p,u,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.SpriteFrame,l=t.director,c=t.sys,p=t.Sprite,u=t.Component},function(t){h=t.Loot,g=t.LootType}],execute:function(){var S,d,L,f,k,y,m,I;r._RF.push({},"17963xTDo5OcKtmUZ6JTkiK","LootSkinManager",void 0);var T=s.ccclass,_=s.property;t("LootSkinManager",(S=T("LootSkinManager"),d=_({type:[a]}),L=_({type:[a]}),S(((I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"coinSprites",y,i(e)),o(e,"heartSprites",m,i(e)),e.LOOT_SKIN_KEY="selected_loot_skin",e}n(e,t);var r=e.prototype;return r.onLoad=function(){e.Instance?this.destroy():(e.Instance=this,l.addPersistRootNode(this.node),console.log("[LootSkinManager] Instance Initialized and set to persist."))},r.getCurrentLootSkin=function(){return c.localStorage.getItem(this.LOOT_SKIN_KEY)||"heart"},r.getCurrentLootSprite=function(){var t=this.getCurrentLootSkin();return this.getLootSpriteForType(t)},r.getLootSpriteForType=function(t){switch(t){case"coin":return this.coinSprites.length>0?this.coinSprites[0]:null;case"heart":return this.heartSprites.length>0?this.heartSprites[0]:null;default:return console.warn("Tipe skin tidak dikenal: "+t+", menggunakan default."),this.heartSprites.length>0?this.heartSprites[0]:null}},r.setLootSkin=function(t){console.log("Setting loot skin to: "+t),c.localStorage.setItem(this.LOOT_SKIN_KEY,t),this.updateAllExistingLootSprites()},r.updateAllExistingLootSprites=function(){var t=this.getCurrentLootSprite();t?(console.log("Updating all NORMAL loot sprites to: "+this.getCurrentLootSkin()),l.getScene().getComponentsInChildren(h).forEach((function(e){if(e.lootType===g.NORMAL){var n=e.getComponent(p);n&&(n.spriteFrame=t)}}))):console.error("Tidak ada SpriteFrame untuk skin saat ini. Pastikan sudah di-assign di Inspector.")},e}(u)).Instance=void 0,y=e((k=I).prototype,"coinSprites",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=e(k.prototype,"heartSprites",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=k))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./demo.ts","./CollisionManager.ts","./ComboManager.ts","./DifficultyManager.ts","./GameStateManager.ts","./Loot.ts","./LootSkinManager.ts","./MovementController.ts","./PowerUpManager.ts","./SaveSystemManager.ts","./ScoreManager.ts","./TimerManager.ts","./VisualManager.ts","./background.ts","./background1.ts","./bird.ts","./changeScreen.ts","./gameInit.ts","./guideScreen.ts","./npmScreen.ts","./pipeMovement.ts","./playScreen.ts","./resultScreen.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MovementController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,o,e,s,r;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy,o=t.math,e=t.tween,s=t.Vec3,r=t.Quat}],execute:function(){n._RF.push({},"01135MP+8JFrJIEWZNVx0mx","MovementController",void 0);t("MovementController",function(){function t(t,i){this.isMoving=!1,this.isReturning=!1,this.startPos=new s(0,130,0),this.targetY=-155,this.targetXRange=100,this.moveSpeed=700,this.returnSpeed=1e3,this.rotationSpeed=100,this.minRotation=-124,this.maxRotation=-56,this.rotationDirection=1,this.currentAngle=-90,this.onReturnComplete=null,this.onBoundaryHit=null,this.onTargetReached=null,this.birdNode=void 0,this.collisionManager=null,this.onDropLootCallback=null,this.birdNode=t,i&&(this.collisionManager=i)}var n=t.prototype;return n.init=function(){this.birdNode.setPosition(this.startPos),this.setRotation(this.currentAngle)},n.setDropLootCallback=function(t){this.onDropLootCallback=t},n.setCallbacks=function(t,i,n){this.onReturnComplete=t,this.onBoundaryHit=i,this.onTargetReached=n},n.startMoving=function(){this.isMoving||this.isReturning||(console.log("Starting claw movement"),this.isMoving=!0,this.collisionManager&&this.collisionManager.notifyStartMove&&this.collisionManager.notifyStartMove())},n.autoRotate=function(t){this.isMoving||this.isReturning||(this.currentAngle+=this.rotationSpeed*this.rotationDirection*t,this.currentAngle>=this.maxRotation?(this.currentAngle=this.maxRotation,this.rotationDirection=-1):this.currentAngle<=this.minRotation&&(this.currentAngle=this.minRotation,this.rotationDirection=1),this.setRotation(this.currentAngle))},n.moveDown=function(t){if(this.isMoving&&!this.isReturning)try{var i=o.toRadian(this.currentAngle),n=Math.cos(i)*this.moveSpeed*t,e=Math.sin(i)*this.moveSpeed*t,s=this.birdNode.getPosition(),r=s.x+n,h=s.y+e;if(r<-this.targetXRange||r>this.targetXRange)return console.log("Boundary hit"),void(this.onBoundaryHit&&this.onBoundaryHit());if(this.birdNode.setPosition(r,h,0),h<=this.targetY)return console.log("Target depth reached"),void(this.onTargetReached&&this.onTargetReached())}catch(t){console.error("Error in moveDown:",t),this.startReturn()}},n.startReturn=function(){var t=this;if(!this.isReturning){console.log("Starting return to base"),this.isReturning=!0,this.isMoving=!1;var i=this.birdNode.getPosition(),n=this.startPos.y-i.y,o=Math.abs(n)/this.returnSpeed;e(this.birdNode).to(o,{position:new s(this.startPos.x,this.startPos.y,this.startPos.z)},{easing:"smooth"}).call((function(){console.log("Return complete"),t.isReturning=!1,t.onReturnComplete&&t.onReturnComplete()})).start()}},n.forceReturn=function(){this.isReturning?console.log("Already returning, skipping force return"):(console.log("Force return triggered"),this.isMoving=!1,this.startReturn())},n.resetPosition=function(){console.log("Resetting claw position"),e(this.birdNode).stop(),this.isMoving=!1,this.isReturning=!1,this.birdNode.setPosition(this.startPos),this.currentAngle=-90,this.setRotation(this.currentAngle),this.rotationDirection=1},n.setRotation=function(t){var i=new r;r.fromEuler(i,0,0,t),this.birdNode.setRotation(i)},i(t,[{key:"isCurrentlyMoving",get:function(){return this.isMoving}},{key:"isCurrentlyReturning",get:function(){return this.isReturning}},{key:"getCurrentAngle",get:function(){return this.currentAngle}},{key:"getStartPos",get:function(){return this.startPos}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/npmScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bird.ts","./playScreen.ts"],(function(n){var e,i,t,r,o,a,s,c,l,d,u,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,s=n.Node,c=n.Animation,l=n.Vec3,d=n.Component},function(n){u=n.bird},function(n){h=n.playScreen}],execute:function(){var m,p,b,f,N,y,g,C,v,S,A,z,k,w;o._RF.push({},"65fa4cDDtlPdYkL17Ox8zvD","npmScreen",void 0);var B=a.ccclass,D=a.property;n("npmScreen",(m=B("npmScreen"),p=D(s),b=D(s),f=D(s),N=D(c),y=D(String),m(((w=function(n){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o))||this,t(e,"btnBack",v,r(e)),t(e,"score",S,r(e)),t(e,"birdNode",A,r(e)),t(e,"screenAnimation",z,r(e)),t(e,"animationName",k,r(e)),e.birdController=null,e}i(e,n);var o=e.prototype;return o.start=function(){e.Instance=this,this.initialize()},o.initialize=function(){this.btnBack&&this.btnBack.on("click",this.hideNpmScreen,this),this.birdNode||(this.birdNode=this.node.scene.getChildByName("bird")),this.birdNode&&(this.birdController=this.birdNode.getComponent(u)),this.node.active=!1},o.onEnable=function(){this.node&&(this.node.setPosition(new l(0,0,0)),this.birdController||(this.birdNode?this.birdController=this.birdNode.getComponent(u):(this.birdNode=this.node.scene.getChildByName("bird"),this.birdNode&&(this.birdController=this.birdNode.getComponent(u)))),this.birdController&&(this.birdController.pauseGame(),console.log("Game paused in npm screen")),this.playScreenAnimation())},o.playScreenAnimation=function(){var n=this;this.screenAnimation||(this.screenAnimation=this.getComponent(c)),this.screenAnimation&&this.animationName&&this.screenAnimation.clips.some((function(e){return e.name===n.animationName}))&&(console.log("Playing animation: "+this.animationName),this.screenAnimation.play(this.animationName))},o.hideNpmScreen=function(){this.node.active=!1,h.Instance&&(h.Instance.node.active=!0)},e}(d)).Instance=void 0,v=e((C=w).prototype,"btnBack",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(C.prototype,"score",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(C.prototype,"birdNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(C.prototype,"screenAnimation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(C.prototype,"animationName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"npmScreen"}}),g=C))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/pipeMovement.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o,s,p,r,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,p=e._decorator,r=e.Vec3,h=e.Component}],execute:function(){var d,c,l;s._RF.push({},"9d720V1uxhBhKvovhSuSFOM","pipeMovement",void 0);var u=p.ccclass,a=p.property;e("pipeMovement",u("pipeMovement")((l=i((c=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),p=0;p<t;p++)s[p]=arguments[p];return(i=e.call.apply(e,[this].concat(s))||this).minX=-170,i.maxX=170,i.fixedY=18,i.baseMoveSpeed=100,i.currentMoveSpeed=500,i.speedMultiplier=1,i.movingRight=!0,n(i,"enableSpeedIndicator",l,o(i)),i.previousSpeedMultiplier=1,i}t(i,e);var s=i.prototype;return s.start=function(){this.node.setPosition(new r(this.minX,this.fixedY,0)),this.updateSpeed(),console.log("Pipe movement initialized with base speed: "+this.baseMoveSpeed)},s.update=function(e){var i=this.node.position,t=this.currentMoveSpeed*e;this.movingRight?(i.x+=t,i.x>=this.maxX&&(i.x=this.maxX,this.movingRight=!1,this.onDirectionChange())):(i.x-=t,i.x<=this.minX&&(i.x=this.minX,this.movingRight=!0,this.onDirectionChange())),i.y=this.fixedY,this.node.setPosition(i)},s.setSpeedMultiplier=function(e){e<=0&&(console.warn("Speed multiplier must be positive, setting to 0.1"),e=.1),this.speedMultiplier=e,this.updateSpeed(),this.speedMultiplier!==this.previousSpeedMultiplier&&(console.log("Pipe speed changed: "+this.previousSpeedMultiplier.toFixed(1)+"x -> "+this.speedMultiplier.toFixed(1)+"x ("+this.currentMoveSpeed.toFixed(0)+" units/sec)"),this.previousSpeedMultiplier=this.speedMultiplier,this.enableSpeedIndicator&&this.showSpeedChangeEffect())},s.getSpeedMultiplier=function(){return this.speedMultiplier},s.getCurrentSpeed=function(){return this.currentMoveSpeed},s.resetSpeed=function(){this.setSpeedMultiplier(1)},s.setBaseSpeed=function(e){e<=0?console.warn("Base speed must be positive"):(this.baseMoveSpeed=e,this.updateSpeed(),console.log("Base speed set to: "+this.baseMoveSpeed))},s.updateSpeed=function(){this.currentMoveSpeed=this.baseMoveSpeed*this.speedMultiplier;var e=5*this.baseMoveSpeed,i=.1*this.baseMoveSpeed;this.currentMoveSpeed>e?(this.currentMoveSpeed=e,console.warn("Speed clamped to maximum: "+e)):this.currentMoveSpeed<i&&(this.currentMoveSpeed=i,console.warn("Speed clamped to minimum: "+i))},s.onDirectionChange=function(){this.enableSpeedIndicator&&this.speedMultiplier>1.5&&this.showDirectionChangeEffect()},s.showSpeedChangeEffect=function(){var e=this,i=this.node.scale.clone(),t=i.clone().multiplyScalar(1.1);this.node.scale=t,this.scheduleOnce((function(){e.node&&e.node.isValid&&(e.node.scale=i)}),.2)},s.showDirectionChangeEffect=function(){var e=this,i=this.node.scale.clone(),t=i.clone().multiplyScalar(1.05);this.node.scale=t,this.scheduleOnce((function(){e.node&&e.node.isValid&&(e.node.scale=i)}),.1)},s.getMovementInfo=function(){return"Speed: "+this.currentMoveSpeed.toFixed(0)+" ("+this.speedMultiplier.toFixed(1)+"x), Direction: "+(this.movingRight?"Right":"Left")+", Position: "+this.node.position.x.toFixed(1)},s.pauseMovement=function(){this.enabled=!1},s.resumeMovement=function(){this.enabled=!0},s.isMovingRight=function(){return this.movingRight},s.forceDirectionChange=function(){this.movingRight=!this.movingRight,this.onDirectionChange()},s.setMovementBounds=function(e,i){if(e>=i)console.warn("Invalid movement bounds: minX must be less than maxX");else{this.minX=e,this.maxX=i;var t=this.node.position;t.x<e?(this.node.setPosition(new r(e,this.fixedY,0)),this.movingRight=!0):t.x>i&&(this.node.setPosition(new r(i,this.fixedY,0)),this.movingRight=!1),console.log("Movement bounds set: "+e+" to "+i)}},s.setYPosition=function(e){this.fixedY=e;var i=this.node.position;this.node.setPosition(new r(i.x,this.fixedY,0)),console.log("Y position set to: "+e)},i}(h)).prototype,"enableSpeedIndicator",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=c))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/playScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bird.ts","./npmScreen.ts","./changeScreen.ts","./guideScreen.ts","./LootSkinManager.ts"],(function(e){var n,t,i,o,r,s,l,a,c,h,u,d,p,m,g,S,C,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.Label,a=e.Node,c=e.Button,h=e.Animation,u=e.director,d=e.Vec3,p=e.Component},function(e){m=e.bird},function(e){g=e.npmScreen},function(e){S=e.changeScreen},function(e){C=e.guideScreen},function(e){b=e.LootSkinManager}],execute:function(){var f,y,v,w,G,A,P,L,z,I,N,B,k,M,O,R,T,E,Z,F,_,D;r._RF.push({},"cf79f83ZixI15B26OVoidfH","playScreen",void 0);var j=s.ccclass,x=s.property;e("playScreen",(f=j("playScreen"),y=x(l),v=x(a),w=x(c),G=x(c),A=x(a),P=x(a),L=x(a),z=x(h),I=x(String),f(((D=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,i(n,"currentScoreLabel",k,o(n)),i(n,"birdNode",M,o(n)),i(n,"playButton",O,o(n)),i(n,"btnChallenge",R,o(n)),i(n,"btnChange",T,o(n)),i(n,"btnProfile",E,o(n)),i(n,"timer",Z,o(n)),i(n,"screenAnimation",F,o(n)),i(n,"animationName",_,o(n)),n.birdController=null,n.npmScreenComponent=null,n.changeScreenComponent=null,n.guideScreenComponent=null,n}t(n,e);var r=n.prototype;return r.onLoad=function(){},r.start=function(){var e=this;n.Instance=this,console.log("PlayScreen start() - hasShownGuideThisSession:",n.hasShownGuideThisSession),this.setupEventListeners(),n.hasShownGuideThisSession?(console.log("Guide already shown this session, skipping..."),this.initializeScreen()):(console.log("Attempting to show guide screen..."),this.scheduleOnce((function(){e.tryShowGuideScreen()}),.1))},r.tryShowGuideScreen=function(){var e;if(this.guideScreenComponent||(this.guideScreenComponent=u.getScene().getComponentInChildren(C),console.log("GuideScreenComponent found:",!!this.guideScreenComponent)),null!=(e=this.guideScreenComponent)&&e.node){if(console.log("Showing guide screen"),this.guideScreenComponent.node.setPosition(0,0,0),this.guideScreenComponent.node.position=d.ZERO,this.guideScreenComponent.node.setScale(1,1,1),this.guideScreenComponent.node.setRotation(0,0,0,1),this.node.active=!1,this.guideScreenComponent.node.active=!0,console.log("GuideScreen position after reset:",this.guideScreenComponent.node.position),!this.birdController){var t=this.birdNode||u.getScene().getChildByName("bird");t&&(this.birdController=t.getComponent(m))}this.birdController&&this.birdController.pauseGame(),n.hasShownGuideThisSession=!0}else console.log("GuideScreenComponent or its node not found - initializing normally"),this.initializeScreen()},n.resetGuideFlag=function(){console.log("Resetting guide flag"),n.hasShownGuideThisSession=!1},r.showGuideScreen=function(){var e;console.log("Manual showGuideScreen called"),this.guideScreenComponent||(this.guideScreenComponent=u.getScene().getComponentInChildren(C)),null!=(e=this.guideScreenComponent)&&e.node?(this.node.active=!1,this.guideScreenComponent.node.active=!0,this.birdController&&this.birdController.pauseGame()):console.log("Cannot show guide screen - component not found")},r.setupEventListeners=function(){this.btnProfile&&this.btnProfile.on("click",this.showNpmScreen,this),this.btnChange&&this.btnChange.on("click",this.showChangeScreen,this),this.playButton&&this.playButton.node.on("click",this.doPlay,this),this.btnChallenge&&this.btnChallenge.node.on("click",this.doPlayChallenge,this)},r.initializeScreen=function(){var e,n=this;if(this.node.setPosition(0,0,0),this.node.position=d.ZERO,this.node.setScale(1,1,1),this.node.setRotation(0,0,0,1),this.node.active=!0,null!=(e=this.currentScoreLabel)&&e.node&&(this.currentScoreLabel.node.active=!1),this.timer&&(this.timer.active=!1),!this.birdController){var t=this.birdNode||u.getScene().getChildByName("bird");t&&(this.birdController=t.getComponent(m))}this.birdController?this.birdController.pauseGame():console.error("Bird controller not found in playScreen"),this.screenAnimation&&this.screenAnimation.stop(),this.scheduleOnce((function(){n.playScreenAnimation()}),.1)},r.playScreenAnimation=function(){var e=this;this.screenAnimation&&this.animationName&&(this.node.setPosition(0,0,0),this.screenAnimation.play(this.animationName),this.scheduleOnce((function(){console.log("PlayScreen playScreenAnimation - Position after animation started:",e.node.position)}),.1))},r.doPlay=function(){var e=this;this.prepareAndStartGame((function(){e.birdController.startGame()}))},r.doPlayChallenge=function(){var e=this;this.prepareAndStartGame((function(){"function"==typeof e.birdController.startChallengeMode?e.birdController.startChallengeMode():(console.error("Method 'startChallengeMode' not found. Starting normal game."),e.birdController.startGame())}))},r.prepareAndStartGame=function(e){var n;this.birdController?(this.birdController.completeReset(),this.node.active=!1,null!=(n=this.currentScoreLabel)&&n.node&&(this.currentScoreLabel.node.active=!0,this.currentScoreLabel.string="0"),this.timer&&(this.timer.active=!0),e()):console.error("FATAL: Bird controller not found. Cannot start game.")},r.showNpmScreen=function(){var e;this.npmScreenComponent||(this.npmScreenComponent=u.getScene().getComponentInChildren(g)),null!=(e=this.npmScreenComponent)&&e.node&&(this.node.active=!1,this.npmScreenComponent.node.active=!0,this.birdController&&this.birdController.pauseGame())},r.showChangeScreen=function(){var e,n=this;console.log("Sebelum showChangeScreen:"),console.log("LootSkinManager.Instance:",b.Instance),console.log("LootSkinManager onLoad sudah jalan?",!!b.Instance),this.changeScreenComponent||(this.changeScreenComponent=u.getScene().getComponentInChildren(S)),null!=(e=this.changeScreenComponent)&&e.node&&(this.node.active=!1,this.changeScreenComponent.node.setPosition(0,0,0),this.changeScreenComponent.node.position=d.ZERO,this.changeScreenComponent.node.active=!0,this.birdController&&this.birdController.pauseGame(),this.scheduleOnce((function(){n.changeScreenComponent&&S.Instance&&"function"==typeof S.Instance.debugPosition&&S.Instance.debugPosition()}),.1))},r.onEnable=function(){var e=this;this.node.setPosition(0,0,0),this.node.position=d.ZERO,this.birdController&&this.birdController.pauseGame(),this.timer&&(this.timer.active=!1),this.screenAnimation&&this.screenAnimation.stop(),this.scheduleOnce((function(){e.playScreenAnimation()}),.1)},n}(p)).Instance=void 0,D.hasShownGuideThisSession=!1,k=n((B=D).prototype,"currentScoreLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(B.prototype,"birdNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(B.prototype,"playButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(B.prototype,"btnChallenge",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(B.prototype,"btnChange",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(B.prototype,"btnProfile",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(B.prototype,"timer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(B.prototype,"screenAnimation",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(B.prototype,"animationName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"playScreen"}}),N=B))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/PowerUpManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,i,r,o,n,s,l,c,p,u,w,f,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,s=e._decorator,l=e.Label,c=e.Prefab,p=e.director,u=e.Node,w=e.ParticleSystem2D,f=e.Color,h=e.instantiate,d=e.Component}],execute:function(){var U,b,v,P,C,g,S;n._RF.push({},"65b6fEp9gRHNr30MLc+5PoM","PowerUpManager",void 0);var k=s.ccclass,A=s.property;e("PowerUpManager",(U=k("PowerUpManager"),b=A(l),v=A(c),U((g=t((C=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).activePowerUps=new Map,i(t,"powerUpStatusLabel",g,r(t)),t.clawSizeCallback=null,t.powerUpEffectCallback=null,t.powerUpDurations={slowTime:5,bigClaw:5,doubleScore:5},t.powerUpActivationCallback=null,i(t,"powerUpPrefab",S,r(t)),t}a(t,e);var n=t.prototype;return n.setClawSizeCallback=function(e){this.clawSizeCallback=e},n.setPowerUpActivationCallback=function(e){this.powerUpActivationCallback=e},n.setPowerUpEffectCallback=function(e){this.powerUpEffectCallback=e},n.activatePowerUp=function(e){this.activePowerUps.set(e,this.powerUpDurations[e]),this.powerUpEffectCallback&&this.powerUpEffectCallback(e,!0),this.powerUpActivationCallback&&this.powerUpActivationCallback(e),"bigClaw"===e&&this.clawSizeCallback&&this.clawSizeCallback(1.5),this.updateStatusLabel()},n.deactivatePowerUp=function(e){this.activePowerUps.has(e)&&(console.log("%c[PUM] MENONAKTIFKAN "+e+". Menghapus dari daftar aktif...","color: red;"),this.activePowerUps.delete(e),this.powerUpEffectCallback&&(console.log("%c[PUM] MEMANGGIL CALLBACK ke bird.ts...","color: red; font-style: italic;"),this.powerUpEffectCallback(e,!1)),this.updateStatusLabel())},n.updatePowerUps=function(e){for(var t,a=o(this.activePowerUps.entries());!(t=a()).done;){var i=t.value,r=i[0],n=i[1]-e;n<=0?(console.log("%c[PUM] WAKTU HABIS untuk: "+r+". Memicu deaktivasi...","color: orange; font-weight: bold;"),this.deactivatePowerUp(r)):this.activePowerUps.set(r,n)}this.updateStatusLabel()},n.isPowerUpActive=function(e){return this.activePowerUps.has(e)},n.getTimeMultiplier=function(){return this.isPowerUpActive("slowTime")?.5:1},n.isDoubleScoreActive=function(){return this.isPowerUpActive("doubleScore")},n.clearAllPowerUps=function(){var e=this;Array.from(this.activePowerUps.keys()).forEach((function(t){return e.deactivatePowerUp(t)})),this.activePowerUps.clear(),this.updateStatusLabel()},n.getActivePowerUpsInfo=function(){return Array.from(this.activePowerUps.entries()).map((function(e){return{type:e[0],timeLeft:e[1]}}))},n.updateStatusLabel=function(){if(this.powerUpStatusLabel){var e=this.getActivePowerUpsInfo();if(0!==e.length){var t="";e.forEach((function(a,i){t+=a.type+": "+a.timeLeft.toFixed(1)+"s",i<e.length-1&&(t+="\n")})),this.powerUpStatusLabel.string=t}else this.powerUpStatusLabel.string="No active power-ups"}},n.spawnPowerUpEffect=function(e,t){if(this.node&&this.node.isValid){var a=p.getScene();if(a){var i=new u("PowerUpEffect");this.node.parent?this.node.parent.addChild(i):a.addChild(i),i.setPosition(e),this.node.parent.addChild(i),i.setPosition(e);var r,o=i.addComponent(w);switch(o.preview=!0,o.autoRemoveOnFinish=!0,o.duration=1,o.emissionRate=100,o.life=.8,o.lifeVar=.3,o.startSize=15,o.startSizeVar=5,o.endSize=0,o.angle=90,o.angleVar=360,o.speed=70,o.speedVar=20,o.radialAccel=-50,o.radialAccelVar=10,t){case"slowTime":r=new f(100,200,255,255);break;case"bigClaw":r=new f(255,255,100,255);break;case"doubleScore":r=new f(255,100,100,255)}o.startColor=r,o.endColor=new f(r.r,r.g,r.b,0),setTimeout((function(){i&&i.isValid&&i.destroy()}),1500)}}},n.spawnPowerUp=function(e){if(this.powerUpPrefab){var t=h(this.powerUpPrefab);e.addChild(t),t.setPosition(400*Math.random()-200,100*Math.random()-100,0)}},t}(d)).prototype,"powerUpStatusLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(C.prototype,"powerUpPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=C))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/resultScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i,r,a,l,c,s,u,d,g,S,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,c=e.Button,s=e.Vec3,u=e.UIOpacity,d=e.tween,g=e.director,S=e.find,f=e.Component}],execute:function(){var p,h,m,y,v,b,B,I,L,P,R;r._RF.push({},"7fa64tWm5ZMRI0alXzHPJ//","resultScreen",void 0);var w=a.ccclass,C=a.property;e("resultScreen",(p=w("resultScreen"),h=C(l),m=C(l),y=C(l),v=C(c),p((I=t((B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"currentBestScoreLabel",I,i(t)),o(t,"currentScoreLabel",L,i(t)),o(t,"finalDifficultyLabel",P,i(t)),o(t,"restartButton",R,i(t)),t.isInitialized=!1,t}n(t,e);var r=t.prototype;return r.onLoad=function(){console.log("ResultScreen onLoad called"),this.node.setPosition(new s(-460,0,0)),this.node.active=!1,this.restartButton?(this.restartButton.node.on("click",this.doRestart,this),console.log("Restart button event listener added")):console.warn("Restart button not assigned in resultScreen"),this.isInitialized=!0,console.log("ResultScreen initialized at position:",this.node.position.toString())},r.onEnable=function(){var e=this;if(console.log("=== ResultScreen onEnable called ==="),this.isInitialized){if(this.node.setPosition(new s(-460,0,0)),this.node.setScale(s.ONE),this.updateScoreDisplay(),this.node.parent){var t=this.node.parent.children.length;this.node.setSiblingIndex(t-1),console.log("Result screen moved to top layer")}this.scheduleOnce((function(){e.playScreenAnimation()}),.1)}else console.warn("ResultScreen not properly initialized")},r.playScreenAnimation=function(){console.log("Playing result screen animation"),this.node.setPosition(new s(-460,0,0)),this.node.setScale(s.ONE);var e=this.node.getComponent(u);e||(e=this.node.addComponent(u)),e&&(e.opacity=255),d(this.node).to(.3,{position:new s(0,0,0)},{easing:"backOut"}).start(),console.log("Result screen animation started - sliding from left to center")},r.updateScoreDisplay=function(){console.log("=== Updating score display ===");var e=localStorage.getItem("currentScore")||"0",t=localStorage.getItem("bestScore")||"0",n=localStorage.getItem("finalDifficulty")||"Easy",o=localStorage.getItem("lastGameMode")||"normal";console.log("Displaying results for mode: "+o),this.currentScoreLabel&&(this.currentScoreLabel.string=""+e),this.currentBestScoreLabel&&(this.currentBestScoreLabel.string=""+t,console.log("Best score label updated:",this.currentBestScoreLabel.string)),this.finalDifficultyLabel&&(this.finalDifficultyLabel.string="Difficulty: "+n)},r.doRestart=function(){var e=this;console.log("=== Restart button clicked ==="),this.restartButton&&(this.restartButton.interactable=!1),localStorage.removeItem("currentScore"),localStorage.removeItem("finalDifficulty"),localStorage.removeItem("bestScore"),console.log("LocalStorage cleared immediately"),d(this.node).to(.2,{position:new s(-460,0,0)},{easing:"backIn"}).call((function(){e.node.active=!1,console.log("Result screen hidden after animation"),e.restartButton&&(e.restartButton.interactable=!0),g.emit("game-reset"),console.log("Game reset event emitted via director");var t=g.getScene();if(t){var n=t.getChildByName("gameInit");if(!n){var o=t.getChildByName("Canvas");o&&(n=o.getChildByName("gameInit"))}n&&(n.emit("game-reset"),console.log("Game reset event emitted to gameInit node"))}e.scheduleOnce((function(){e.forceShowPlayScreen()}),.1)})).start()},r.forceShowPlayScreen=function(){console.log("=== FORCE SHOWING PLAY SCREEN ===");var e=S("Canvas/playScreen");if(e||(e=S("playScreen")),!e){var t=S("Canvas");t&&(e=t.getChildByName("playScreen"))}if(e){if(console.log("PlayScreen node found, forcing display..."),e.setPosition(new s(0,0,0)),e.setScale(new s(1,1,1)),e.active=!0,e.parent){var n=e.parent.children.length;e.setSiblingIndex(n-1),console.log("PlayScreen moved to top layer, index:",e.getSiblingIndex())}var o=e.getComponent("playScreen");o&&(o.initializeScreen&&o.initializeScreen(),o.resetScreen&&o.resetScreen(),console.log("PlayScreen component force initialized"));var i=S("Canvas/resultScreen")||S("resultScreen");i&&i!==this.node&&(i.active=!1);var r=S("Canvas/npmScreen")||S("npmScreen");r&&(r.active=!1),console.log("PlayScreen force display completed!"),console.log("PlayScreen active:",e.active),console.log("PlayScreen position:",e.position.toString()),console.log("PlayScreen scale:",e.scale.toString())}else{console.error("PlayScreen node not found for force display!");var a=S("Canvas");a&&console.log("Available Canvas children:",a.children.map((function(e){return{name:e.name,active:e.active,position:e.position.toString()}})))}},r.onDestroy=function(){this.restartButton&&this.restartButton.node.off("click",this.doRestart,this)},t}(f)).prototype,"currentBestScoreLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(B.prototype,"currentScoreLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(B.prototype,"finalDifficultyLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"restartButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/SaveSystemManager.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"3e489z5RSBCyJr6JAalyCp/","SaveSystemManager",void 0);var t=e("SaveSystemManager",function(){function e(){}var r=e.prototype;return r.saveScore=function(r,t){var o=!1;if("normal"===t?r>e.currentBestScoreNormal&&(e.currentBestScoreNormal=r,o=!0,console.log("New Best Score (Normal): "+r)):r>e.currentBestScoreChallenge&&(e.currentBestScoreChallenge=r,o=!0,console.log("New Best Score (Challenge): "+r)),o){var a={bestScoreNormal:e.currentBestScoreNormal,bestScoreChallenge:e.currentBestScoreChallenge};localStorage.setItem(e.SAVE_KEY,JSON.stringify(a)),console.log("Saved new best scores to localStorage.")}},r.loadBestScores=function(){try{var r=localStorage.getItem(e.SAVE_KEY);if(r){var t=JSON.parse(r);t&&(e.currentBestScoreNormal=t.bestScoreNormal||0,e.currentBestScoreChallenge=t.bestScoreChallenge||0),console.log("Scores loaded: Normal("+this.getCurrentBestScoreNormal()+"), Challenge("+this.getCurrentBestScoreChallenge()+")")}}catch(e){console.error("Error loading saved data:",e)}},r.getCurrentBestScoreNormal=function(){return e.currentBestScoreNormal},r.getCurrentBestScoreChallenge=function(){return e.currentBestScoreChallenge},e}());t.SAVE_KEY="ClawGame_SaveData_v2",t.currentBestScoreNormal=0,t.currentBestScoreChallenge=0,r._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["cc"],(function(e){var t,r,c;return{setters:[function(e){t=e.cclegacy,r=e.Vec3,c=e.tween}],execute:function(){t._RF.push({},"ea281KWpNhNtrISnwQIWrKl","ScoreManager",void 0);e("ScoreManager",function(){function e(){this.currentScore=0,this.currentScoreLabel=null,this.plusOneScoreLabel=null,this.comboLabel=null,this.resetScore()}var t=e.prototype;return t.resetScore=function(){this.currentScore=0,this.updateScoreDisplay(),this.plusOneScoreLabel&&(this.plusOneScoreLabel.active=!1)},t.setCurrentScore=function(e){this.currentScore=Math.max(0,e),this.updateScoreDisplay()},t.addScore=function(e,t){var n=this;void 0===e&&(e=!1);var o=1;return e&&(o*=2),this.currentScore+=o,this.plusOneScoreLabel&&(this.plusOneScoreLabel.active=!0,this.plusOneScoreLabel.setPosition(r.ZERO),c(this.plusOneScoreLabel).to(.5,{position:new r(0,50,0)}).call((function(){n.plusOneScoreLabel&&n.plusOneScoreLabel.isValid&&(n.plusOneScoreLabel.active=!1)})).start()),this.updateScoreDisplay(),o},t.getCurrentScore=function(){return this.currentScore},t.updateScoreDisplay=function(){this.currentScoreLabel&&(this.currentScoreLabel.string=this.currentScore.toString())},t.setScoreLabel=function(e){this.currentScoreLabel=e,this.updateScoreDisplay()},t.setPlusOneLabel=function(e){this.plusOneScoreLabel=e},t.setComboLabel=function(e){this.comboLabel=e},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["cc"],(function(e){var i,t;return{setters:[function(e){i=e.cclegacy,t=e.ProgressBar}],execute:function(){i._RF.push({},"85da6aAxgBOQq8PweAbNz2X","TimerManager",void 0);e("TimerManager",function(){function e(){this.gameTime=10,this.maxTime=10,this.isTimerActive=!1,this.timeBonusesEnabled=!0,this.timerBar=null,this.gameOverCallback=null,this.resetTimer()}var i=e.prototype;return i.setMode=function(e,i){console.log("TimerManager: Setting mode - Max Time: "+e+"s, Allow Bonuses: "+i),this.maxTime=e,this.gameTime=e,this.timeBonusesEnabled=i,this.updateTimerBar()},i.resetTimer=function(){this.setMode(10,!0),this.isTimerActive=!1,this.updateTimerBar()},i.startTimer=function(){this.isTimerActive=!0},i.stopTimer=function(){this.isTimerActive=!1},i.updateTimer=function(e,i){void 0===i&&(i=1),this.isTimerActive&&(this.gameTime-=e*i,this.updateTimerBar(),this.gameTime<=0&&(this.gameTime=0,this.stopTimer(),this.gameOverCallback&&this.gameOverCallback()))},i.updateTimerBar=function(){if(this.timerBar){var e=Math.max(0,this.gameTime/this.maxTime),i=this.timerBar.getComponent(t);i?i.progress=e:this.timerBar.setScale(e,1,1)}},i.addTime=function(e){this.isTimerActive&&this.timeBonusesEnabled&&(this.gameTime=Math.min(this.maxTime,this.gameTime+e),this.updateTimerBar())},i.setGameOverCallback=function(e){this.gameOverCallback=e},i.setTimerBar=function(e){this.timerBar=e,this.updateTimerBar()},i.isActive=function(){return this.isTimerActive},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/VisualManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,o,a,s,r,c,l,f,h,u,d,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,s=i._decorator,r=i.Node,c=i.Animation,l=i.Label,f=i.Vec3,h=i.Graphics,u=i.Color,d=i.tween,p=i.Component}],execute:function(){var y,w,g,v,b,L,m,C,D;a._RF.push({},"4a2b4okv1ZGNql5FxBNpF+m","VisualManager",void 0);var P=s.ccclass,z=s.property;i("VisualManager",(y=P("VisualManager"),w=z(r),g=z(c),v=z(l),y((m=t((L=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=i.call.apply(i,[this].concat(a))||this,n(t,"ropeNode",m,o(t)),n(t,"clawAnim",C,o(t)),n(t,"difficultyLabel",D,o(t)),t.graphics=null,t.startPos=new f(0,130,0),t}e(t,i);var a=t.prototype;return a.start=function(){this.initializeRope(),this.initializeDifficultyLabel()},a.initializeRope=function(){this.ropeNode||(this.ropeNode=new r("rope"),this.node.parent.addChild(this.ropeNode),this.ropeNode.setSiblingIndex(this.node.getSiblingIndex()-1)),this.graphics=this.ropeNode.addComponent(h),this.graphics.lineWidth=3,this.graphics.strokeColor=new u(139,69,19,255)},a.drawRope=function(i){this.graphics&&i&&(this.graphics.clear(),this.graphics.moveTo(this.startPos.x,this.startPos.y),this.graphics.lineTo(i.position.x,i.position.y),this.graphics.stroke())},a.clearRope=function(){this.graphics&&this.graphics.clear()},a.setRopeColor=function(i){this.graphics&&(this.graphics.strokeColor=i)},a.setRopeWidth=function(i){this.graphics&&(this.graphics.lineWidth=i)},a.playClawAnimation=function(i){this.clawAnim&&this.clawAnim.play(i)},a.stopClawAnimation=function(){this.clawAnim&&this.clawAnim.stop()},a.initializeDifficultyLabel=function(){this.difficultyLabel&&this.difficultyLabel.node&&(this.difficultyLabel.node.active=!1)},a.showDifficultyLabel=function(){this.difficultyLabel&&this.difficultyLabel.node&&(this.difficultyLabel.node.active=!0)},a.hideDifficultyLabel=function(){this.difficultyLabel&&this.difficultyLabel.node&&(this.difficultyLabel.node.active=!1)},a.updateDifficultyDisplay=function(i,t){if(this.difficultyLabel){this.difficultyLabel.string=""+t;var e=[new u(0,255,0,255),new u(255,255,0,255),new u(255,165,0,255),new u(255,0,0,255),new u(128,0,128,255),new u(255,0,255,255)];i<e.length&&(this.difficultyLabel.color=e[i])}},a.showDifficultyChangeNotification=function(i){var t=new r("DifficultyNotification"),e=t.addComponent(l);e.string="DIFFICULTY: "+i.toUpperCase()+"!",e.fontSize=24,e.color=new u(255,255,0,255),this.node.parent.addChild(t),t.setPosition(new f(0,0,0)),d(t).to(.3,{scale:new f(1.2,1.2,1)}).to(.3,{scale:new f(1,1,1)}).delay(1).to(.5,{position:new f(0,50,0),opacity:0}).call((function(){t.isValid&&t.destroy()})).start()},a.createFloatingText=function(i,t,e,n){void 0===e&&(e=new u(255,255,255,255)),void 0===n&&(n=18);var o=new r("FloatingText"),a=o.addComponent(l);a.string=i,a.fontSize=n,a.color=e,this.node.parent.addChild(o),o.setPosition(t),d(o).to(1,{position:new f(t.x,t.y+50,t.z),opacity:0}).call((function(){o.isValid&&o.destroy()})).start()},a.createPulseEffect=function(i,t,e){if(void 0===t&&(t=1.2),void 0===e&&(e=.3),i){var n=i.scale.clone();d(i).to(e,{scale:new f(t,t,1)}).to(e,{scale:n}).start()}},a.createShakeEffect=function(i,t,e){if(void 0===t&&(t=5),void 0===e&&(e=.5),i)for(var n=i.position.clone(),o=e/10,a=0;a<10;a++){var s=(Math.random()-.5)*t,r=(Math.random()-.5)*t;d(i).delay(a*o).to(o/2,{position:new f(n.x+s,n.y+r,n.z)}).to(o/2,{position:n}).start()}},a.createFadeEffect=function(i,t,e,n){if(void 0===t&&(t=!0),void 0===e&&(e=.5),i){var o=t?0:255;d(i).to(e,{opacity:o}).call((function(){n&&n()})).start()}},a.createScreenTransition=function(i,t,e,n){var o=this;void 0===e&&(e="fade"),void 0===n&&(n=.5),"fade"===e?this.createFadeEffect(i,!0,n/2,(function(){i&&(i.active=!1),t&&(t.active=!0,t.opacity=0,o.createFadeEffect(t,!1,n/2))})):"slide"===e&&this.createSlideTransition(i,t,n)},a.createSlideTransition=function(i,t,e){if(i&&t){t.active=!0,t.setPosition(new f(640,0,0)),d(i).to(e,{position:new f(-640,0,0)}).call((function(){i.active=!1,i.setPosition(new f(0,0,0))})).start(),d(t).to(e,{position:new f(0,0,0)}).start()}},a.setStartPosition=function(i){this.startPos=i},a.getStartPosition=function(){return this.startPos.clone()},a.resetAllVisuals=function(){this.clearRope(),this.stopClawAnimation(),this.hideDifficultyLabel()},a.onDestroy=function(){this.clearRope()},t}(p)).prototype,"ropeNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"clawAnim",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(L.prototype,"difficultyLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=L))||b));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});